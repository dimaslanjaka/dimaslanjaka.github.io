var s={scroller:function(){function s(){return this.callbacks=[],this}return s.prototype.bindScrollEvent=function(){var s=this;window.addEventListener("scroll",(function(t){var o=!1,e=window.pageYOffset;o||(o=!0,setTimeout((function(){var i={event:t,beforeOffsetY:e};s.callbacks.forEach((function(s){s(i)})),o=!1}),150))}))},s},showTopic:function(s){var t=document.getElementById("postTopic"),o=document.getElementById("postTitle"),e=o.getBoundingClientRect(),i=o.offsetTop+e.height;if(window.pageYOffset>i){var l=s&&s.beforeOffsetY,c=l-window.pageYOffset>0;t.classList.remove("is-hidden-topic-bar"),l-window.pageYOffset==0?(t.classList.remove("is-switch-post-title"),t.classList.remove("is-show-post-title"),t.classList.remove("immediately-show"),t.classList.contains("is-show-scrollToTop-tips")?(t.classList.remove("is-show-scrollToTop-tips"),t.classList.add("is-flash-scrollToTop-tips")):t.classList.add("immediately-show")):c?window.pageYOffset>2*window.innerHeight?(t.classList.remove("immediately-show"),t.classList.remove("is-show-post-title"),t.classList.remove("is-switch-post-title"),t.classList.remove("is-flash-scrollToTop-tips"),t.classList.add("is-show-scrollToTop-tips")):(t.classList.remove("immediately-show"),t.classList.remove("is-show-post-title"),t.classList.remove("is-show-scrollToTop-tips"),t.classList.remove("is-flash-scrollToTop-tips"),t.classList.add("is-switch-post-title")):l-window.pageYOffset!=0&&(t.classList.remove("immediately-show"),t.classList.remove("is-switch-post-title"),t.classList.remove("is-show-scrollToTop-tips"),t.classList.remove("is-flash-scrollToTop-tips"),t.classList.add("is-show-post-title"))}else t.classList.remove("is-flash-scrollToTop-tips"),t.classList.remove("is-show-scrollToTop-tips"),t.classList.remove("is-switch-post-title"),t.classList.remove("is-show-post-title"),t.classList.remove("immediately-show"),t.classList.add("is-hidden-topic-bar")},catalogueHighlight:function(){var s=document.querySelectorAll(".toc a");if(0===s.length)return!1;var t=document.querySelector(".toc");return function(){var o=[],e="is-active";s.forEach((function(s){if(s.href){var t=decodeURI(s.href).split("#")[1];o.push(document.getElementById(t))}}));for(var i=null,l=window.pageYOffset,c=0;c<o.length;c++){var a=o[c];if(!(a.offsetTop>l+30)){i?a.offsetTop+60>=i.offsetTop-60&&(i=a):i=a;var n=document.querySelector(".toc ."+e);n&&n.classList.remove(e);var r='.toc a[href="#'+encodeURI(i.id)+'"]',d=document.querySelector(r);d.classList.add(e);var m=t.getBoundingClientRect().height;d.offsetTop>=m-60?t.scrollTo({top:d.offsetTop+100-m}):t.scrollTo({top:0})}}}},smoothScrollToTop:function(){var t=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;t>1?(window.requestAnimationFrame(s.smoothScrollToTop),scrollTo(0,Math.floor(.85*t))):scrollTo(0,0)},addValineComment(){var s=document.getElementById("vcomments");new Valine({el:"#vcomments",appId:s.dataset.comment_valine_id,appKey:s.dataset.comment_valine_key})},mounted:function(){hljs&&hljs.initHighlighting();var s=new(this.scroller()),t=this.catalogueHighlight();t&&s.callbacks.push(t),s.callbacks.push(this.showTopic),s.bindScrollEvent(),$claudia.fadeInImage(document.querySelectorAll(".post-content img")),document.getElementById("postTopic").addEventListener("click",this.smoothScrollToTop),window.Valine&&this.addValineComment()}};s.mounted();