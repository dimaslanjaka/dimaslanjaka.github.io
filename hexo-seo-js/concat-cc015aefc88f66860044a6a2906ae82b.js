/*--- inner-0 --*/


{"theme":{"menu":{"Home":"/","About":"/about","Archive":"/archives"},"widgets":["tag","archive","recent_posts","category","profile"],"social":{"zhihu":null,"twitter":null,"facebook":"/dimaslanjaka1","linkedin":null,"instagram":null,"github":"dimaslanjaka"},"user":{"name":"dimaslanjaka","avatar":null,"location":"Surabaya, Indonesia","description":"May the Force be with you","footnotes":null},"comment_utteranc":{"enable":false,"repo":"dimaslanjaka/static-blog-generator"},"comment_valine":{"enable":false,"appId":null,"appKey":null},"comment_disqus":{"enable":true,"url":"https://www.webmanajemen.com","name":"dimaslanjaka"},"appearance":"auto","favicon":"/favicon.ico","friend_links":[{"title":"Facebook","link":"https://www.facebook.com/dimaslanjaka1"},{"title":"Github","link":"https://www.github.com/dimaslanjaka"},{"title":"Facebook Group","link":"https://www.facebook.com/groups/167869813590708"}],"ga_track_id":null,"ga_domain":null,"ba_track_id":null,"about_pic":"/images/about-us.png","image_zoom":{"enable":true},"hostname":"www.webmanajemen.com","root":"/"},"project":{"title":"WMI","subtitle":"Website Management Indonesia","description":"Website Management Indonesia is a blog about scripts, tips and tricks, games, software. Covering php, javascript, jquery, mysql, seo, e-commerce and others.","author":"Dimas Lanjaka","language":"id","timezone":"Asia/Jakarta","url":"https://www.webmanajemen.com","root":"/","permalink":":title.html","permalink_defaults":{"lang":"en"},"pretty_urls":{"trailing_index":true,"trailing_html":true},"source_dir":"source","public_dir":"public","tag_dir":"tags","archive_dir":"archives","category_dir":"categories","code_dir":"downloads/code","i18n_dir":":lang","skip_render":["*.html","chimeraland/recipes.html","_posts/chimeraland/recipes.html","assets/adblock-notify/*.html","page/*.html","comment.html","source/comment.html","**/hexo-theme-unit-test/**","**/node_modules/**","yandex_*","ahrefs_*","glx_*","Midi","Midi/**/*","*.json","**/*.json","_posts/**/*.json","_posts/**/*.js","_posts/**/*.css","_posts/The Legend Of Neverland/Midi/readme.md","**/__test__/**","**/__tests__/**"],"new_post_name":":year/:month/:title.md","default_layout":"post","titlecase":false,"external_link":{"enable":true,"field":"site","exclude":["webmanajemen.com","web-manajemen.blogspot.com","dimaslanjaka.github.io"],"safelink":{"enable":true,"exclude":["webmanajemen.com","git.webmanajemen.com","**/chimeraland/recipes.html","**/embed.html","**/tools.html","**/safelink.html","**/node_modules/**","**/vendor/**"],"redirect":"https://www.webmanajemen.com/page/safelink.html?url=","type":"base64","password":"unique-password"}},"filename_case":0,"render_drafts":false,"post_asset_folder":true,"relative_link":false,"future":true,"syntax_highlighter":"highlight.js","highlight":{"auto_detect":false,"line_number":false,"tab_replace":"  ","wrap":false,"exclude_languages":[],"language_attr":false,"hljs":false,"enable":true},"prismjs":{"preprocess":true,"line_number":true,"tab_replace":"","enable":false},"default_category":"uncategorized","category_map":null,"tag_map":null,"date_format":"YYYY-MM-DD","time_format":"HH:mm:ss","updated_option":false,"per_page":10,"pagination_dir":"page","theme":"claudia","server":{"port":4000,"log":false,"ip":"0.0.0.0","compress":false,"header":false,"cache":false,"serveStatic":{"dotfiles":"allow","extensions":["html","js","css","png","jpg","jpeg"]}},"deploy":{"type":"git","repo":"https://github.com/dimaslanjaka/dimaslanjaka.github.io.git","branch":"master","message":"Git Deployment: {{ now('YYYY-MM-DD HH:mm:ss') }}","hostname":"www.webmanajemen.com","username":"dimaslanjaka","email":"dimaslanjaka@gmail.com"},"ignore":["**/.git*"],"meta_generator":true,"keywords":"the legend of neverland, genshin impact, games, how to, tips and tricks, php, javascript, jquery, mysql, seo, e-commerce","languages":["en","id","zh-TW","zh-CN","zh-HK","th","tl"],"multilingual":true,"i18n":{"type":["page","post"],"generator":[]},"search":{"path":"search.xml","field":"post","content":true,"format":"html"},"marked":{"prependRoot":true,"postAsset":true},"index_generator":{"per_page":10,"order_by":"-updated","path":"","pagination_dir":"page"},"default_tag":null,"include":["assets/adblock-notify/readme.md"],"exclude":["**/.git*","**/.git","**/.vscode","**/.idea","**/.env","**/License.md","**/frontmatter.json","**/.frontmatter","**/git-hooks","**/License","**/bin/**","**/backend/**","**/MIDI.js/**","**/{readme,README,changelog,CHANGELOG,license,LICENSE,License}.md","**/Test/**","**/guzzle/**","**/exclude/**","**/hexo-post-parser/**","**/node_modules/**","**/vendor/**","**/ads/**","**/tmp/**","**/hexo-theme-unit-test/**"],"author_obj":{"name":"Dimas Lanjaka","link":"https://www.webmanajemen.com/","image":{"url":"https://res.cloudinary.com/dimaslanjaka/image/fetch/https://imgdb.net/images/3600.jpg","width":1944,"height":2592}},"social_links":{"github":"https://github.com/dimaslanjaka","youtube":"https://youtube.com/p/L3n4r0x"},"feed":{"icon":"/logo.png","content":true,"type":["atom","rss2"],"path":["atom.xml","rss.xml"]},"sitemap":{"path":["sitemap.xml","sitemap.txt"],"template_txt":"./_config_template_sitemap.txt","rel":true,"tags":true,"categories":true},"markdown_it_plus":{"highlight":true,"html":true,"xhtmlOut":true,"breaks":true,"langPrefix":null,"linkify":true,"typographer":null,"pre_class":"highlight","plugins":[{"plugin":{"name":"markdown-it-attrs","enable":true,"options":{"leftDelimiter":"{","rightDelimiter":"}","allowedAttributes":[]}}}]},"browsersync":{"logLevel":"warn","ghostMode":{"scroll":true},"instanceName":"customInstance","port":3001,"browser":"firefox","open":false},"excerpt":{"depth":10,"excerpt_excludes":[],"more_excludes":[],"hideWholePostExcerpts":false},"adsense":{"enable":false,"pub":"ca-pub-2974518380815858","article_ads":null,"field":"site","https":false,"adblock":false,"type":"javascript","exclude":["*.min.html","**/exclude/**/*"]},"redirect":{"enable":true,"layout":"hexo-generator-redirect"},"analytics":{"tagmanager":"GTM-NJNNXSR","GA4":"G-BG75CLNJZ1","GA3":"UA-106238155-1","cloudflare":"2157c0f3b9e74a92badffe39156166b9"},"seo":{"cache":true,"js":{"enable":false,"concat":true,"exclude":["*.min.js","**/*.min.js"],"options":{"compress":{"dead_code":true},"mangle":{"toplevel":true,"safari10":true}}},"css":{"enable":false,"exclude":["*.min.css","**/*.min.css"]},"html":{"enable":true,"fix":true,"exclude":["*.min.{htm,html}"],"collapseBooleanAttributes":true,"collapseWhitespace":true,"ignoreCustomComments":[{}],"removeComments":true,"removeEmptyAttributes":true,"removeScriptTypeAttributes":true,"removeStyleLinkTypeAttributes":true,"minifyJS":true,"minifyCSS":true},"img":{"enable":true,"default":"https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg","onerror":"serverside","broken":false},"host":"www.webmanajemen.com","links":{"blank":true,"enable":true,"allow":["webmanajemen.com"],"exclude":["webmanajemen.com","web-manajemen.blogspot.com"]},"schema":{"sitelink":{"enable":true,"searchUrl":"https://www.webmanajemen.com/search?q={search_term_string}"},"article":{"enable":true},"breadcrumb":{"enable":true}},"sitemap":true,"theme_dir":"/home/runner/work/static-blog-generator-hexo/static-blog-generator-hexo/site/themes/claudia","source_dir":"/home/runner/work/static-blog-generator-hexo/static-blog-generator-hexo/site/source","post_dir":"/home/runner/work/static-blog-generator-hexo/static-blog-generator-hexo/site/source/_posts"},"generator":{"cache":true,"type":"hexo","verbose":false,"amp":false},"tags":{"lowercase":true,"mapper":{"JS":"javascript","TS":"javascript"},"assign":{"JS":"programming","TS":"programming","GitHub":"Programming"}},"categories":{"lowercase":true,"mapper":{"JS":"javascript","TS":"typescript"},"assign":{"GitHub":"Programming","JS":"programming","TS":"programming"}},"flowchart":{"flowchart":"https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js","raphael":"https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js","options":{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}},"nofollow":{"enable":true,"field":"site","exclude":[]},"category_generator":{"per_page":10},"archive_generator":{"per_page":10,"yearly":true,"monthly":true,"daily":false},"tag_generator":{"per_page":10},"markdown":{"preset":"default","render":{"html":true,"xhtmlOut":false,"breaks":true,"linkify":true,"typographer":true,"quotes":"“”‘’"},"anchors":{"level":2,"collisionSuffix":"","permalink":false,"permalinkClass":"header-anchor","permalinkSide":"left","permalinkSymbol":"¶","case":0,"separator":"-"}},"homepage":"/"}}



/*--- /r-ads.js --*/


/* eslint-disable @typescript-eslint/no-unused-vars */
/* eslint-disable no-global-assign */

/// <reference path="./cookie.js" />

/**
 * ADSENSE FULLY AUTOMATIC
 */

document.addEventListener('DOMContentLoaded', function () {
	if (!islocalhost()) {
		window.addEventListener('scroll', triggerAdsense);
	} else {
		triggerAdsense();
	}
});

/**
 * Prevent Duplicate
 */
let called = false;

/**
 * Trigger adsense
 * @param {Event} _e
 * @returns
 */
function triggerAdsense(_e) {
	if (called) return;
	called = true;

	/**
	 * debug on localhost
	 */
	const log = islocalhost()
		? console.log
		: function (..._args) {
				//
		  };

	const existingIns = Array.from(document.querySelectorAll('ins[class*=adsbygoogle]'));
	log('existing ins', existingIns.length);

	for (let i = 0; i < existingIns.length; i++) {
		const ins = existingIns[i];

		if (islocalhost()) {
			log('apply test ad to existing ins', i + 1);
			ins.setAttribute('data-adtest', 'on');
		}
	}

	/**
	 * do not show ads to these page title
	 */
	const banned = [/lagu|jackpot|montok|hack|crack|nulled/gi];
	if (banned.map(regex => regex.test(document.title)).some(result => result == true)) {
		// skip showing ads from banned page
		return;
	}

	const allAds = [
		{
			name: 'kiki',
			pub: '2188063137129806',
			ads: [
				{
					style: 'display: block; text-align: center',
					'data-ad-layout': 'in-article',
					'data-ad-format': 'fluid',
					'data-ad-slot': '5634823028',
				},
				{
					style: 'display: block; text-align: center',
					'data-ad-layout': 'in-article',
					'data-ad-format': 'fluid',
					'data-ad-slot': '8481296455',
				},
				{
					style: 'display:block',
					'data-ad-slot': '2667720583',
					'data-ad-format': 'auto',
					'data-full-width-responsive': 'true',
				},
				{
					style: 'display:block',
					'data-ad-format': 'fluid',
					'data-ad-layout-key': '-gw-3+1f-3d+2z',
					'data-ad-slot': '6979059162',
				},
			],
		},
	].sort(function () {
		// shuffle
		return 0.5 - Math.random();
	});

	// select ads
	// cookie key
	const ck = 'currentAds';
	// select previous ads id from cookie
	const ca = getCookie(ck);
	/**
	 * @type {typeof allAds[number]}
	 */
	let currentSlot = allAds.find(item => item.pub === ca);

	if (ca.length > 0 && typeof currentSlot === 'object') {
		log('cached pub', ca);
	} else {
		currentSlot = allAds[0];

		if (location.pathname != '/') {
			log('caching pub', currentSlot.pub);
			setCookie(
				ck,
				currentSlot.pub,
				1,
				location.pathname,
				location.hostname,
				location.protocol.includes('https') && location.host === 'www.webmanajemen.com',
			);
		}
	}

	log('total ads banner', currentSlot.ads.length);

	// find element *[adsense="fill"]
	const fixedPlacement = Array.from(document.querySelectorAll('[adsense="fill"]'));
	if (fixedPlacement.length > 0) {
		for (let i = 0; i < fixedPlacement.length; i++) {
			const place = fixedPlacement[i];
			const attr = currentSlot.ads.shift();
			if (attr) {
				attr['data-ad-client'] = 'ca-pub-' + currentSlot.pub;
				const ins = createIns(attr);
				log('insert ads to adsense="fill"', i + 1);
				replaceWith(ins, place);
			}
		}
	}

	// find content/article wrapper
	let findPlaces = Array.from(document.querySelectorAll('article'));
	if (findPlaces.length === 0) {
		// theme-next main content
		findPlaces = Array.from(document.querySelectorAll('.page.main-inner'));
	}
	if (findPlaces.length === 0) {
		findPlaces = Array.from(document.querySelectorAll('#main-content'));
	}
	if (findPlaces.length === 0) {
		// bootstrap wrapper
		findPlaces = Array.from(document.querySelectorAll('#bootstrap-wrapper'));
	}
	if (findPlaces.length === 0) {
		// typedoc documentation page
		findPlaces = Array.from(document.querySelectorAll('[class="col-8 col-content"]'));
	}
	// fallback search at body
	if (findPlaces.length === 0) {
		findPlaces = Array.from(document.querySelectorAll('body'));
	}
	
	// select random place
	let adsPlaces = findPlaces
		.map(getAllPlaces)
		.flat(1)
		.sort(function () {
			return 0.5 - Math.random();
		})
		.filter(el => el !== null)
		.sort(function () {
			return 0.5 - Math.random();
		});

	log('total targeted ads places', adsPlaces.length);

	if (adsPlaces.length > 0 && currentSlot.ads.length > 0) {
		for (let i = 0; i < currentSlot.ads.length; i++) {
			const attr = currentSlot.ads[i];
			if (attr) {
				attr['data-ad-client'] = 'ca-pub-' + currentSlot.pub;
				const ins = createIns(attr);
				let nextOf = adsPlaces.shift(); // get first element and remove it from list
				while (!nextOf) {
					// find next when nextOf = null
					if (adsPlaces.length > 0) {
						// select next place
						nextOf = adsPlaces.shift();
					} else {
						// if ads places empty, put to any div
						nextOf = document.querySelector('div');
					}
				}

				log('add banner', i + 1);
				insertAfter(ins, nextOf);
			}
		}
	}

	// create pagead
	const script = document.createElement('script');
	script.src = `//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-${currentSlot.pub}`;
	script.async = true;
	script.setAttribute('crossorigin', 'anonymous');
	document.head.appendChild(script);

	const allIns = Array.from(document.querySelectorAll('ins'));
	log('total ins', allIns.length);

	for (let i = 0; i < allIns.length; i++) {
		log('apply banner', i + 1);
		const ins = allIns[i];
		if (!ins) continue;
		if (!ins.getAttribute('data-ad-client')) {
			console.log(ins);
			continue;
		}
		const adclient = ins.getAttribute('data-ad-client').replace('ca-pub-', '');
		const anonclient = adclient.slice(0, 3) + 'xxx' + adclient.slice(adclient.length - 3);
		const adsid = ins.getAttribute('data-ad-slot');
		const anonid = adsid.slice(0, 3) + 'xxx' + adsid.slice(adsid.length - 3);
		const bg = `https://via.placeholder.com/200x50/FFFFFF/000000/?text=${anonclient}-${anonid}`;
		ins.style.backgroundImage = `url('${bg}')`;
		ins.style.backgroundRepeat = 'no-repeat';
		// log('parent width banner', i + 0, ins.parentElement.offsetWidth);

		if (ins.parentElement.offsetWidth === 0) {
			// remove banner when parent width is 0 or display: none
			log('remove banner', i + 1);
			ins.remove();
		} else if (ins.innerHTML.trim().length === 0) {
			(adsbygoogle = window.adsbygoogle || []).push({});
		}
	}

	/** FUNC START */

	/**
	 * create ins
	 * @param {Record<string,any>} attributes
	 * @returns
	 */
	function createIns(attributes) {
		if (!attributes['data-ad-client']) {
			attributes['data-ad-client'] = 'ca-pub-' + currentSlot.pub;
		}
		const ins = document.createElement('ins');
		Object.keys(attributes).forEach(key => {
			ins.setAttribute(key, attributes[key]);
		});
		if (!ins.classList.contains('adsbygoogle')) {
			ins.classList.add('adsbygoogle');
		}
		if (!ins.classList.contains('bannerAds')) {
			ins.classList.add('bannerAds');
		}
		if (islocalhost()) {
			ins.setAttribute('data-adtest', 'on');
		}
		return ins;
	}

	/**
	 * insert next other
	 * @param {HTMLElement} newNode
	 * @param {HTMLElement|undefined} referenceNode insert after this element
	 */
	function insertAfter(newNode, referenceNode) {
		if (referenceNode) {
			referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
		}
	}

	/**
	 * Create detailed cookie
	 * @param {string} name
	 * @param {string} value
	 * @param {number} expires
	 * @param {string} path
	 * @param {string} domain
	 * @param {boolean} secure
	 */
	function setCookie(name, value, expires, path, domain, secure) {
		let exp = '';
		if (expires) {
			const d = new Date();
			d.setTime(d.getTime() + parseInt(expires) * 24 * 60 * 60 * 1000); // days
			exp = '; expires=' + d.toGMTString(); // toGMTString | toUTCString
		}
		if (!path) {
			path = '/';
		}
		const cookie =
			name +
			'=' +
			encodeURIComponent(value) +
			exp +
			'; path=' +
			path +
			(domain ? '; domain=' + domain : '') +
			(secure ? '; secure' : '');
		log(cookie);
		document.cookie = cookie;
	}

	/**
	 * get all ads places
	 * @param {Element|Document} from
	 */
	function getAllPlaces(from) {
		return Array.from(from.querySelectorAll('h1,h2,h3,h4,h5,pre,header,hr,br,table,blockquote'))
			.sort(function () {
				return 0.5 - Math.random();
			})
			.filter(el => el !== null);
	}

	/**
	 * get cookie by name
	 * @param {string} cname
	 * @returns
	 */
	function getCookie(cname) {
		let name = cname + '=';
		let decodedCookie = decodeURIComponent(document.cookie);
		let ca = decodedCookie.split(';');
		for (let i = 0; i < ca.length; i++) {
			let c = ca[i];
			while (c.charAt(0) == ' ') {
				c = c.substring(1);
			}
			if (c.indexOf(name) == 0) {
				return c.substring(name.length, c.length);
			}
		}
		return '';
	}

	/**
	 * Replace elements with new
	 * @param {HTMLElement} newElement
	 * @param {HTMLElement} oldElement
	 */
	function replaceWith(newElement, oldElement) {
		if (!oldElement.parentNode) {
			log(oldElement, 'parent null');
			let d = document.createElement('div');
			d.appendChild(oldElement);
		} else {
			//log(oldElement.parentNode.tagName);
			oldElement.parentNode.replaceChild(newElement, oldElement);
		}
	}

	/** FUNC END */
}

/**
 * check current script running on localhost
 * @returns
 */
function islocalhost() {
	// local hostname
	if (['adsense.webmanajemen.com', 'localhost', '127.0.0.1'].includes(location.hostname)) return true;
	// local network
	if (location.hostname.startsWith('192.168.')) return true;
	// port defined
	if (location.port.length > 0) return true;
	return false;
}




/*--- inner-6 --*/



    /* global CONFIG, pjax, LocalSearch */

    document.addEventListener('DOMContentLoaded', () => {
      if (!CONFIG.path) {
        // Search DB path
        console.warn('`hexo-generator-searchdb` plugin is not installed!');
        return;
      }
      const localSearch = new LocalSearch({
        path: CONFIG.path,
        top_n_per_article: CONFIG.localsearch.top_n_per_article,
        unescape: CONFIG.localsearch.unescape
      });

      const input = document.querySelector('.search-input');

      const inputEventFunction = () => {
        if (!localSearch.isfetched) return;
        const searchText = input.value.trim().toLowerCase();
        const keywords = searchText.split(/[-\s]+/);
        const container = document.querySelector('.search-result-container');
        let resultItems = [];
        if (searchText.length > 0) {
          // Perform local searching
          resultItems = localSearch.getResultItems(keywords);
        }
        if (keywords.length === 1 && keywords[0] === '') {
          container.classList.add('no-result');
          container.innerHTML = '<div class="search-result-icon"><i class="fa fa-search fa-5x"></i></div>';
        } else if (resultItems.length === 0) {
          container.classList.add('no-result');
          container.innerHTML = '<div class="search-result-icon"><i class="far fa-frown fa-5x"></i></div>';
        } else {
          resultItems.sort((left, right) => {
            if (left.includedCount !== right.includedCount) {
              return right.includedCount - left.includedCount;
            } else if (left.hitCount !== right.hitCount) {
              return right.hitCount - left.hitCount;
            }
            return right.id - left.id;
          });
          const stats = CONFIG.i18n.hits.replace('${hits}', resultItems.length);

          container.classList.remove('no-result');
          container.innerHTML = `<div class="search-stats">${stats}</div>
        <hr>
        <ul class="search-result-list">${resultItems.map(result => result.item).join('')}</ul>`;
          if (typeof pjax === 'object') pjax.refresh(container);
        }
      };

      localSearch.highlightSearchWords(document.querySelector('.post-body'));
      if (CONFIG.localsearch.preload) {
        localSearch.fetchData();
      }

      if (CONFIG.localsearch.trigger === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        document.querySelector('.search-icon').addEventListener('click', inputEventFunction);
        input.addEventListener('keypress', event => {
          if (event.key === 'Enter') {
            inputEventFunction();
          }
        });
      }
      window.addEventListener('search:loaded', inputEventFunction);

      // Handle and trigger popup window
      document.querySelectorAll('.popup-trigger').forEach(element => {
        element.addEventListener('click', () => {
          document.body.classList.add('search-active');
          // Wait for search-popup animation to complete
          setTimeout(() => input.focus(), 500);
          if (!localSearch.isfetched) localSearch.fetchData();
        });
      });

      // Monitor main search box
      const onPopupClose = () => {
        document.body.classList.remove('search-active');
      };

      document.querySelector('.search-pop-overlay').addEventListener('click', event => {
        if (event.target === document.querySelector('.search-pop-overlay')) {
          onPopupClose();
        }
      });
      document.querySelector('.popup-btn-close').addEventListener('click', onPopupClose);
      document.addEventListener('pjax:success', () => {
        localSearch.highlightSearchWords(document.querySelector('.post-body'));
        onPopupClose();
      });
      window.addEventListener('keyup', event => {
        if (event.key === 'Escape') {
          onPopupClose();
        }
      });
    });
  


