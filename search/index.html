<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search | WMI</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <style>
    .fit-cover {
      object-fit: cover;
    }

    @media (min-width: 768px) {
      .fit-cover {
        position: absolute;
      }
    }

    #sr .card {
      cursor: pointer;
    }
  </style>
<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"></head>

<body>
  <div class="container-fluid">
    <div class="text-center mb-2">
      <h1 id="title">Search Results</h1>
    </div>

    <div class="mb-2">
      <form action="/search/" method="get" id="form-search">
        <input type="text" name="q" class="form-control" placeholder="type to search">
      </form>
    </div>

    <div id="sr">
      <small>total posts 0</small>

      
    </div>
  </div>

  <script>
    const searchURL = "https://www.webmanajemen.com/search.xml";
    fetch(searchURL).then(response => response.text()).then(response => {
      const parser = new DOMParser();
      const xmlDoc = parser.parseFromString(response, "text/xml");
      const root = xmlDoc.getElementsByTagName("search")[0]
      const baseURL = new URL('https://www.webmanajemen.com')
      const results = Array.from(root.children).map(el => {
        baseURL.pathname = el.querySelector('url').innerHTML.trim().replace(/^\/+/, '/')
        const title = el.querySelector('title').innerHTML.trim()
        return {
          title,
          content: el.querySelector('content').innerHTML.trim(),
          url: baseURL.toString(),
          card: document.querySelector(
            'div.card[title="' + title + '"]'
          )
        }
      })

      const querySearch = getParameterByName('q')
      if (querySearch) {
        document.getElementById('title').innerHTML = querySearch + ' Search Result'
      } else {
        document.getElementById('title').innerHTML = 'WMI Site Search'
      }

      results.forEach(item => {
        const card = item.card
        if (card) {
          // supress image error
          const checkImageBroken = function () {
            const img = card.querySelector('img[source]')
            const source = img.getAttribute('source')
            const imgElement = new Image();
            imgElement.addEventListener('load', () => (img.src = source));
            //imgElement.addEventListener('error', () => resolve(false));
            imgElement.src = source
          }


          if (querySearch) {
            const matchTitle = new RegExp(querySearch, 'igm').test(item.title)
            const matchContent = new RegExp(querySearch, 'igm').test(item.content)
            if (matchTitle || matchContent) {
              // matched
              checkImageBroken()
            } else {
              card.remove()
            }
          }
        }
      })
    });

    document.getElementById('form-search').addEventListener('submit', function (_e) {
      _e.preventDefault()
      location.href = '/search/?q=' + _e.target.elements.q.value
      return false
    })

    function cardClickHandler(el) {
      const perm = el.getAttribute('permalink')
      //window.location.href = perm
      window.open(perm, 'wmi').focus()
    }

    function getParameterByName(name, url = window.location.href) {
      name = name.replace(/[\[\]]/g, '\\$&');
      var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
      if (!results) return null;
      if (!results[2]) return '';
      return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }
  </script>

  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>





</body></html>