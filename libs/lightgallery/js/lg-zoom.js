/**!
 * lg-zoom.js | 0.0.2 | August 4th 2016
 * http://sachinchoolur.github.io/lg-zoom.js
 * Copyright (c) 2016 Sachin N; 
 * @license Apache 2.0 
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LgZoom=t()}}((function(){return function e(t,o,r){function s(l,a){if(!o[l]){if(!t[l]){var n="function"==typeof require&&require;if(!a&&n)return n(l,!0);if(i)return i(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var u=o[l]={exports:{}};t[l][0].call(u.exports,(function(o){var r=t[l][1][o];return s(r||o)}),u,u.exports,e,t,o,r)}return o[l].exports}for(var i="function"==typeof require&&require,l=0;l<r.length;l++)s(r[l]);return s}({1:[function(t,o,r){!function(t,o){if(void 0!==r)o();else{o(),t.lgZoom={}}}(this,(function(){"use strict";var t=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},o={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300},Zoom=function(r){return this.el=r,this.core=window.lgData[this.el.getAttribute("lg-uid")],this.core.s=t({},o,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)),this};Zoom.prototype.init=function(){var t=this,o='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';t.core.s.actualSize&&(o+='<span id="lg-actual-size" class="lg-icon"></span>'),this.core.outer.querySelector(".lg-toolbar").insertAdjacentHTML("beforeend",o),utils.on(t.core.el,"onSlideItemLoad.lgtmzoom",(function(o){var r=t.core.s.enableZoomAfter+o.detail.delay;utils.hasClass(document.body,"lg-from-hash")&&o.detail.delay?r=0:utils.removeClass(document.body,"lg-from-hash"),t.zoomabletimeout=setTimeout((function(){utils.addClass(t.core.___slide[o.detail.index],"lg-zoomable")}),r+30)}));var r=1,zoom=function(o){var r=t.core.outer.querySelector(".lg-current .lg-image"),i=(window.innerWidth-r.clientWidth)/2,l=(window.innerHeight-r.clientHeight)/2+(document.documentElement.scrollTop||document.body.scrollTop),a=(o-1)*(t.pageX-i),n=(o-1)*(t.pageY-l);utils.setVendor(r,"Transform","scale3d("+o+", "+o+", 1)"),r.setAttribute("data-scale",o),r.parentElement.style.left=-a+"px",r.parentElement.style.top=-n+"px",r.parentElement.setAttribute("data-x",a),r.parentElement.setAttribute("data-y",n)},callScale=function(){r>1?utils.addClass(t.core.outer,"lg-zoomed"):t.resetZoom(),r<1&&(r=1),zoom(r)},actualSize=function(o,i,l,a){var n,c=i.clientWidth;n=t.core.s.dynamic?t.core.s.dynamicEl[l].width||i.naturalWidth||c:t.core.items[l].getAttribute("data-width")||i.naturalWidth||c,utils.hasClass(t.core.outer,"lg-zoomed")?r=1:n>c&&(r=n/c||2),a?(t.pageX=window.innerWidth/2,t.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)):(t.pageX=o.pageX||o.targetTouches[0].pageX,t.pageY=o.pageY||o.targetTouches[0].pageY),callScale(),setTimeout((function(){utils.removeClass(t.core.outer,"lg-grabbing"),utils.addClass(t.core.outer,"lg-grab")}),10)},i=!1;utils.on(t.core.el,"onAferAppendSlide.lgtmzoom",(function(o){var r=o.detail.index,l=t.core.___slide[r].querySelector(".lg-image");t.core.isTouch||utils.on(l,"dblclick",(function(t){actualSize(t,l,r)})),t.core.isTouch&&utils.on(l,"touchstart",(function(t){i?(clearTimeout(i),i=null,actualSize(t,l,r)):i=setTimeout((function(){i=null}),300),t.preventDefault()}))})),utils.on(window,"resize.lgzoom scroll.lgzoom orientationchange.lgzoom",(function(){t.pageX=window.innerWidth/2,t.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop),zoom(r)})),utils.on(document.getElementById("lg-zoom-out"),"click.lg",(function(){t.core.outer.querySelector(".lg-current .lg-image")&&(r-=t.core.s.scale,callScale())})),utils.on(document.getElementById("lg-zoom-in"),"click.lg",(function(){t.core.outer.querySelector(".lg-current .lg-image")&&(r+=t.core.s.scale,callScale())})),utils.on(document.getElementById("lg-actual-size"),"click.lg",(function(o){actualSize(o,t.core.___slide[t.core.index].querySelector(".lg-image"),t.core.index,!0)})),utils.on(t.core.el,"onBeforeSlide.lgtm",(function(){r=1,t.resetZoom()})),t.core.isTouch||t.zoomDrag(),t.core.isTouch&&t.zoomSwipe()},Zoom.prototype.resetZoom=function(){utils.removeClass(this.core.outer,"lg-zoomed");for(var t=0;t<this.core.___slide.length;t++)this.core.___slide[t].querySelector(".lg-img-wrap")&&(this.core.___slide[t].querySelector(".lg-img-wrap").removeAttribute("style"),this.core.___slide[t].querySelector(".lg-img-wrap").removeAttribute("data-x"),this.core.___slide[t].querySelector(".lg-img-wrap").removeAttribute("data-y"));for(var o=0;o<this.core.___slide.length;o++)this.core.___slide[o].querySelector(".lg-image")&&(this.core.___slide[o].querySelector(".lg-image").removeAttribute("style"),this.core.___slide[o].querySelector(".lg-image").removeAttribute("data-scale"));this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)},Zoom.prototype.zoomSwipe=function(){for(var t=this,o={},r={},i=!1,l=!1,a=!1,n=0;n<t.core.___slide.length;n++)utils.on(t.core.___slide[n],"touchstart.lg",(function(r){if(utils.hasClass(t.core.outer,"lg-zoomed")){var i=t.core.___slide[t.core.index].querySelector(".lg-object");a=i.offsetHeight*i.getAttribute("data-scale")>t.core.outer.querySelector(".lg").clientHeight,((l=i.offsetWidth*i.getAttribute("data-scale")>t.core.outer.querySelector(".lg").clientWidth)||a)&&(r.preventDefault(),o={x:r.targetTouches[0].pageX,y:r.targetTouches[0].pageY})}}));for(var c=0;c<t.core.___slide.length;c++)utils.on(t.core.___slide[c],"touchmove.lg",(function(n){if(utils.hasClass(t.core.outer,"lg-zoomed")){var c,u,d=t.core.___slide[t.core.index].querySelector(".lg-img-wrap");n.preventDefault(),i=!0,r={x:n.targetTouches[0].pageX,y:n.targetTouches[0].pageY},utils.addClass(t.core.outer,"lg-zoom-dragging"),u=a?-Math.abs(d.getAttribute("data-y"))+(r.y-o.y):-Math.abs(d.getAttribute("data-y")),c=l?-Math.abs(d.getAttribute("data-x"))+(r.x-o.x):-Math.abs(d.getAttribute("data-x")),(Math.abs(r.x-o.x)>15||Math.abs(r.y-o.y)>15)&&(d.style.left=c+"px",d.style.top=u+"px")}}));for(var u=0;u<t.core.___slide.length;u++)utils.on(t.core.___slide[u],"touchend.lg",(function(){utils.hasClass(t.core.outer,"lg-zoomed")&&i&&(i=!1,utils.removeClass(t.core.outer,"lg-zoom-dragging"),t.touchendZoom(o,r,l,a))}))},Zoom.prototype.zoomDrag=function(){for(var t=this,o={},r={},i=!1,l=!1,a=!1,n=!1,c=0;c<t.core.___slide.length;c++)utils.on(t.core.___slide[c],"mousedown.lgzoom",(function(r){var l=t.core.___slide[t.core.index].querySelector(".lg-object");n=l.offsetHeight*l.getAttribute("data-scale")>t.core.outer.querySelector(".lg").clientHeight,a=l.offsetWidth*l.getAttribute("data-scale")>t.core.outer.querySelector(".lg").clientWidth,utils.hasClass(t.core.outer,"lg-zoomed")&&utils.hasClass(r.target,"lg-object")&&(a||n)&&(r.preventDefault(),o={x:r.pageX,y:r.pageY},i=!0,t.core.outer.scrollLeft+=1,t.core.outer.scrollLeft-=1,utils.removeClass(t.core.outer,"lg-grab"),utils.addClass(t.core.outer,"lg-grabbing"))}));utils.on(window,"mousemove.lgzoom",(function(c){if(i){var u,d,g=t.core.___slide[t.core.index].querySelector(".lg-img-wrap");l=!0,r={x:c.pageX,y:c.pageY},utils.addClass(t.core.outer,"lg-zoom-dragging"),d=n?-Math.abs(g.getAttribute("data-y"))+(r.y-o.y):-Math.abs(g.getAttribute("data-y")),u=a?-Math.abs(g.getAttribute("data-x"))+(r.x-o.x):-Math.abs(g.getAttribute("data-x")),g.style.left=u+"px",g.style.top=d+"px"}})),utils.on(window,"mouseup.lgzoom",(function(c){i&&(i=!1,utils.removeClass(t.core.outer,"lg-zoom-dragging"),!l||o.x===r.x&&o.y===r.y||(r={x:c.pageX,y:c.pageY},t.touchendZoom(o,r,a,n)),l=!1),utils.removeClass(t.core.outer,"lg-grabbing"),utils.addClass(t.core.outer,"lg-grab")}))},Zoom.prototype.touchendZoom=function(t,o,r,i){var l=this,a=l.core.___slide[l.core.index].querySelector(".lg-img-wrap"),n=l.core.___slide[l.core.index].querySelector(".lg-object"),c=-Math.abs(a.getAttribute("data-x"))+(o.x-t.x),u=-Math.abs(a.getAttribute("data-y"))+(o.y-t.y),d=(l.core.outer.querySelector(".lg").clientHeight-n.offsetHeight)/2,g=Math.abs(n.offsetHeight*Math.abs(n.getAttribute("data-scale"))-l.core.outer.querySelector(".lg").clientHeight+d),m=(l.core.outer.querySelector(".lg").clientWidth-n.offsetWidth)/2,h=Math.abs(n.offsetWidth*Math.abs(n.getAttribute("data-scale"))-l.core.outer.querySelector(".lg").clientWidth+m);(Math.abs(o.x-t.x)>15||Math.abs(o.y-t.y)>15)&&(i&&(u<=-g?u=-g:u>=-d&&(u=-d)),r&&(c<=-h?c=-h:c>=-m&&(c=-m)),i?a.setAttribute("data-y",Math.abs(u)):u=-Math.abs(a.getAttribute("data-y")),r?a.setAttribute("data-x",Math.abs(c)):c=-Math.abs(a.getAttribute("data-x")),a.style.left=c+"px",a.style.top=u+"px")},Zoom.prototype.destroy=function(){var t=this;utils.off(t.core.el,".lgzoom"),utils.off(window,".lgzoom");for(var o=0;o<t.core.___slide.length;o++)utils.off(t.core.___slide[o],".lgzoom");utils.off(t.core.el,".lgtmzoom"),t.resetZoom(),clearTimeout(t.zoomabletimeout),t.zoomabletimeout=!1},window.lgModules.zoom=Zoom}))},{}]},{},[1])(1)}));