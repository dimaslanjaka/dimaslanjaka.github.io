Stun.utils=Stun.$u={debounce:function(t,e,n){var o;return function(){var i=this,a=arguments;if(o&&clearTimeout(o),n){var r=!o;o=setTimeout((function(){o=null}),e),r&&t.apply(i,a)}else o=setTimeout((function(){t.apply(i,a)}),e)}},throttle:function(t,e,n){var o,i,a,r=0;n||(n={});var c=function(){r=!1===n.leading?0:(new Date).getTime(),o=null,t.apply(i,a),o||(i=a=null)};return function(){var s=(new Date).getTime();r||!1!==n.leading||(r=s);var l=e-(s-r);i=this,a=arguments,l<=0||l>e?(o&&(clearTimeout(o),o=null),r=s,t.apply(i,a),o||(i=a=null)):o||!1===n.trailing||(o=setTimeout(c,l))}},hasMobileUA:function(){var t=window.navigator.userAgent;return/iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g.test(t)},isTablet:function(){return window.screen.width>767&&window.screen.width<992&&this.hasMobileUA()},isMobile:function(){return window.screen.width<767&&this.hasMobileUA()},isDesktop:function(){return!this.isTablet()&&!this.isMobile()},Cookies:function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}return function e(n){function o(e,i,a){var r;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=t({path:"/"},o.defaults,a)).expires){var c=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*a.expires),a.expires=c}a.expires=a.expires?a.expires.toUTCString():"";try{r=JSON.stringify(i),/^[{[]/.test(r)&&(i=r)}catch(m){}i=n.write?n.write(i,e):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[()]/g,escape);var s="";for(var l in a)a[l]&&(s+="; "+l,!0!==a[l]&&(s+="="+a[l]));return document.cookie=e+"="+i+s}e||(r={});for(var d=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,p=0;p<d.length;p++){var f=d[p].split("="),h=f.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var g=f[0].replace(u,decodeURIComponent);if(h=n.read?n.read(h,g):n(h,g)||h.replace(u,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(m){}if(e===g){r=h;break}e||(r[g]=h)}catch(m){}}return r}}return o.set=o,o.get=function(t){return o.call(o,t)},o.getJSON=function(){return o.apply({json:!0},[].slice.call(arguments))},o.defaults={},o.remove=function(e,n){o(e,"",t(n,{expires:-1}))},o.withConverter=e,o}((function(){}))},showThemeInConsole:function(){console.log("%c%s%c%s%c%s","background-color: #49b1f5; color: #fff; padding: 8px; font-size: 14px;","主题不错？⭐star 支持一下 ->","background-color: #ffbca2; padding: 8px; font-size: 14px;","https://github.com/liuyib/hexo-theme-stun","background-color: #eaf8ff;","\n\n      ___          ___            ___            ___      \n     /\\  \\        /\\  \\          /\\__\\          /\\__\\     \n    /::\\  \\       \\:\\  \\        /:/  /         /::|  |    \n   /:/\\ \\  \\       \\:\\  \\      /:/  /         /:|:|  |    \n  _\\:\\ \\ \\  \\      /::\\  \\    /:/  /  ___    /:/|:|  |__  \n /\\ \\:\\ \\ \\__\\    /:/\\:\\__\\  /:/__/  /\\__\\  /:/ |:| /\\__\\ \n \\:\\ \\:\\ \\/__/   /:/  \\/__/  \\:\\  \\ /:/  /  \\/__|:|/:/  / \n  \\:\\ \\:\\__\\    /:/  /        \\:\\  /:/  /       |:/:/  /  \n   \\:\\/:/  /    \\/__/          \\:\\/:/  /        |::/  /   \n    \\::/  /                     \\::/  /         /:/  /    \n     \\/__/                       \\/__/          \\/__/     \n                                                          \n")},codeToKeyCode:function(t){return{ArrowLeft:37,ArrowRight:39,Escape:27,Enter:13}[t]},popAlert:function(t,e,n){0!==$(".stun-message").length&&$(".stun-message").remove();var o=$(`<div class="stun-message"><div class="stun-alert stun-alert-${t}"><i class="stun-alert-icon ${CONFIG.fontIcon.prompt[t]}"></i><span class="stun-alert-description">${e}</span></div></div>`);$("body").append(o),$(document).ready((function(){$(".stun-alert").velocity("stop").velocity("transition.slideDownBigIn",{duration:300}).velocity("reverse",{delay:1e3*n||5e3,duration:260,complete:function(){$(".stun-alert").css("display","none")}})}))},copyText:function(t){try{var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t),e.removeAllRanges(),e.addRange(n);var o=e.toString(),i=document.createElement("input");if(i.style.display="none",i.setAttribute("readonly","readonly"),i.setAttribute("value",o),document.body.appendChild(i),i.setSelectionRange(0,-1),document.execCommand("copy"))return document.execCommand("copy"),document.body.removeChild(i),!0;document.body.removeChild(i)}catch(a){return!1}},wrapImageWithFancyBox:function(){$(".content img").not(":hidden").each((function(){var t=$(this),e=t.attr("title")||t.attr("alt"),n=t.parent("a"),o=["data-src","data-original","src"],i="";if(!n[0]){for(var a=0;a<o.length;a++)if(t.attr(o[a])){i=t.attr(o[a]);break}n=t.wrap(`<a class="fancybox" href="${i}"></a>`).parent("a"),t.is(".gallery img")?n.attr("data-fancybox","gallery"):n.attr("data-fancybox","default")}e&&n.attr("title",e).attr("data-caption",e)})),$().fancybox({selector:"[data-fancybox]",loop:!0,transitionEffect:"slide",hash:!1,buttons:["share","slideShow","fullScreen","download","thumbs","close"]})},showImageToWaterfall:function(){var t=CONFIG.galleryWaterfall,e=parseInt(t.colWidth),n=parseInt(t.gapX),o=".gallery img";this.waitAllImageLoad(o,(function(){$(".gallery").masonry({itemSelector:o,columnWidth:e,percentPosition:!0,gutter:n,transitionDuration:0})}))},lazyLoadImage:function(){$("img.lazyload").lazyload()},addIconToExternalLink:function(t){if($(t)[0]){var e=$('<span class="exturl"></span>'),n=$(`<span class="exturl__icon"><i class="${CONFIG.externalLink.icon.name}"></i></span>`);$(t).find('a[target="_blank"]').addClass("exturl__link").wrap(e).parent(".exturl").append(n)}},registerSwitchPost:function(){var t=this.codeToKeyCode("ArrowLeft"),e=this.codeToKeyCode("ArrowRight");$(document).on("keydown",(function(n){var o=n.keyCode===t,i=n.keyCode===e;if(n.ctrlKey)if(o){var a=$(".paginator-prev a")[0];a&&a.click()}else if(i){var r=$(".paginator-next a")[0];r&&r.click()}}))},registerShowReward:function(){$(".reward-button").on("click",(function(){var t=$(".reward-qrcode");t.is(":visible")?t.css("display","none"):t.velocity("stop").velocity("transition.slideDownIn",{duration:300})}))},registerZoomImage:function(){$("#content-wrap img").not(":hidden").each((function(){"none"!==$(this).attr("data-zoom")&&$(this).addClass("zoomimg")}));var t=$('<div class="zoomimg-mask"></div>'),e=null,n=!1;function o(){n&&(n=!1,e.velocity("reverse"),t.velocity("reverse",{complete:function(){t.remove(),e.remove(),$(".zoomimg").removeClass("zoomimg--hide")}}))}$(window).on("scroll",o),$(document).on("click",o),$(".zoomimg").on("click",(function(i){if(i.stopPropagation(),n)o();else{n=!0,e=$(this).clone().addClass("zoomimg-clone");var a=parseInt(CONFIG.zoomImage.gapAside||20),r=this.getBoundingClientRect(),c=$(this).outerWidth(),s=$(this).outerHeight(),l=$(this).width(),d=$(this).height(),u=$(this).offset().left+(c-l)/2,p=$(this).offset().top+(s-d)/2,f=$(window).width()-2*a,h=$(window).height()-2*a,g=f/l,m=h/d,v=(g<m?g:m)||1,y=f/2-(r.x+c/2)+a,w=h/2-(r.y+s/2)+a;$(this).addClass("zoomimg--hide"),$("body").append(t).append(e),t.velocity({opacity:1}),e.css({left:u,top:p,width:l,height:d}),e.velocity({translateX:y,translateY:w,scale:v},{duration:300})}}))},addCodeHeader:function(t){$("figure.highlight").each((function(){if(!$(this).find("figcaption")[0]){var e="";if(t)"carbon"===t&&(e+='\n            <div class="custom-carbon">\n              <div class="custom-carbon-dot custom-carbon-dot--red"></div>\n              <div class="custom-carbon-dot custom-carbon-dot--yellow"></div>\n              <div class="custom-carbon-dot custom-carbon-dot--green"></div>\n            </div>\n          ');else{e+=`<div class="custom-lang">${$(this).attr("class").split(/\s/).filter((function(t){return"highlight"!==t}))}</div>`}$(`<figcaption class="custom">${e}</figcaption>`).insertBefore($(this).children().first())}}))},addCopyButton:function(t){var e=".post-copyright,",n=$(`<div class="copy-button" data-popover="${CONFIG.prompt.copyButton}" data-popover-pos="up"><i class="${CONFIG.fontIcon.copyBtn}"></i></div>`);e+="simple"===t||"carbon"===t?'.highlight figcaption:not(".custom")':".highlight figcaption",$(e).append(n)},registerCopyEvent:function(){$(".copy-button").on("click",(function(){var t=null,e=$(this).parents("figure.highlight").find("td.code")[0];t=e||$(this).parent()[0],Stun.utils.copyText(t)?Stun.utils.popAlert("success",CONFIG.prompt.copySuccess):Stun.utils.popAlert("error",CONFIG.prompt.copyError)}))},waitAllImageLoad:function(t,e){var n=[];$(t).each((function(){var t=$.Deferred();$(this).bind("load",(function(){t.resolve()})),this.complete&&setTimeout((function(){t.resolve()}),500),n.push(t)})),$.when.apply(null,n).then(e)}};