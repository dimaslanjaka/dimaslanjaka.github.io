/**!
 * lg-zoom.js | 0.0.2 | August 4th 2016
 * http://sachinchoolur.github.io/lg-zoom.js
 * Copyright (c) 2016 Sachin N; 
 * @license Apache 2.0 
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LgZoom=t()}}((function(){return function e(t,a,s){function i(c,u){if(!a[c]){if(!t[c]){var d="function"==typeof require&&require;if(!u&&d)return d(c,!0);if(n)return n(c,!0);var g=new Error("Cannot find module '"+c+"'");throw g.code="MODULE_NOT_FOUND",g}var m=a[c]={exports:{}};t[c][0].call(m.exports,(function(a){var s=t[c][1][a];return i(s||a)}),m,m.exports,e,t,a,s)}return a[c].exports}for(var n="function"==typeof require&&require,c=0;c<s.length;c++)i(s[c]);return i}({1:[function(t,a,s){!function(t,a){if(void 0!==s)a();else{a(),t.lgZoom={}}}(this,(function(){"use strict";var t=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},a={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300},o=function(s){return this.el=s,this.core=window.lgData[this.el.getAttribute("lg-uid")],this.core.s=t({},a,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)),this};o.prototype.init=function(){var t=this,a='<span id="lg-zoom-in" class="lg-icon"></span><span id="lg-zoom-out" class="lg-icon"></span>';t.core.s.actualSize&&(a+='<span id="lg-actual-size" class="lg-icon"></span>'),this.core.outer.querySelector(".lg-toolbar").insertAdjacentHTML("beforeend",a),utils.on(t.core.el,"onSlideItemLoad.lgtmzoom",(function(a){var s=t.core.s.enableZoomAfter+a.detail.delay;utils.hasClass(document.body,"lg-from-hash")&&a.detail.delay?s=0:utils.removeClass(document.body,"lg-from-hash"),t.zoomabletimeout=setTimeout((function(){utils.addClass(t.core.___slide[a.detail.index],"lg-zoomable")}),s+30)}));var s=1,r=function(a){var s=t.core.outer.querySelector(".lg-current .lg-image"),n=(window.innerWidth-s.clientWidth)/2,c=(window.innerHeight-s.clientHeight)/2+(document.documentElement.scrollTop||document.body.scrollTop),u=(a-1)*(t.pageX-n),d=(a-1)*(t.pageY-c);utils.setVendor(s,"Transform","scale3d("+a+", "+a+", 1)"),s.setAttribute("data-scale",a),s.parentElement.style.left=-u+"px",s.parentElement.style.top=-d+"px",s.parentElement.setAttribute("data-x",u),s.parentElement.setAttribute("data-y",d)},i=function(){s>1?utils.addClass(t.core.outer,"lg-zoomed"):t.resetZoom(),s<1&&(s=1),r(s)},l=function(a,n,c,u){var d,g=n.clientWidth;d=t.core.s.dynamic?t.core.s.dynamicEl[c].width||n.naturalWidth||g:t.core.items[c].getAttribute("data-width")||n.naturalWidth||g,utils.hasClass(t.core.outer,"lg-zoomed")?s=1:d>g&&(s=d/g||2),u?(t.pageX=window.innerWidth/2,t.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)):(t.pageX=a.pageX||a.targetTouches[0].pageX,t.pageY=a.pageY||a.targetTouches[0].pageY),i(),setTimeout((function(){utils.removeClass(t.core.outer,"lg-grabbing"),utils.addClass(t.core.outer,"lg-grab")}),10)},n=!1;utils.on(t.core.el,"onAferAppendSlide.lgtmzoom",(function(a){var s=a.detail.index,c=t.core.___slide[s].querySelector(".lg-image");t.core.isTouch||utils.on(c,"dblclick",(function(t){l(t,c,s)})),t.core.isTouch&&utils.on(c,"touchstart",(function(t){n?(clearTimeout(n),n=null,l(t,c,s)):n=setTimeout((function(){n=null}),300),t.preventDefault()}))})),utils.on(window,"resize.lgzoom scroll.lgzoom orientationchange.lgzoom",(function(){t.pageX=window.innerWidth/2,t.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop),r(s)})),utils.on(document.getElementById("lg-zoom-out"),"click.lg",(function(){t.core.outer.querySelector(".lg-current .lg-image")&&(s-=t.core.s.scale,i())})),utils.on(document.getElementById("lg-zoom-in"),"click.lg",(function(){t.core.outer.querySelector(".lg-current .lg-image")&&(s+=t.core.s.scale,i())})),utils.on(document.getElementById("lg-actual-size"),"click.lg",(function(a){l(a,t.core.___slide[t.core.index].querySelector(".lg-image"),t.core.index,!0)})),utils.on(t.core.el,"onBeforeSlide.lgtm",(function(){s=1,t.resetZoom()})),t.core.isTouch||t.zoomDrag(),t.core.isTouch&&t.zoomSwipe()},o.prototype.resetZoom=function(){utils.removeClass(this.core.outer,"lg-zoomed");for(var t=0;t<this.core.___slide.length;t++)this.core.___slide[t].querySelector(".lg-img-wrap")&&(this.core.___slide[t].querySelector(".lg-img-wrap").removeAttribute("style"),this.core.___slide[t].querySelector(".lg-img-wrap").removeAttribute("data-x"),this.core.___slide[t].querySelector(".lg-img-wrap").removeAttribute("data-y"));for(var a=0;a<this.core.___slide.length;a++)this.core.___slide[a].querySelector(".lg-image")&&(this.core.___slide[a].querySelector(".lg-image").removeAttribute("style"),this.core.___slide[a].querySelector(".lg-image").removeAttribute("data-scale"));this.pageX=window.innerWidth/2,this.pageY=window.innerHeight/2+(document.documentElement.scrollTop||document.body.scrollTop)},o.prototype.zoomSwipe=function(){for(var t=this,a={},s={},n=!1,c=!1,u=!1,d=0;d<t.core.___slide.length;d++)utils.on(t.core.___slide[d],"touchstart.lg",(function(s){if(utils.hasClass(t.core.outer,"lg-zoomed")){var n=t.core.___slide[t.core.index].querySelector(".lg-object");u=n.offsetHeight*n.getAttribute("data-scale")>t.core.outer.querySelector(".lg").clientHeight,((c=n.offsetWidth*n.getAttribute("data-scale")>t.core.outer.querySelector(".lg").clientWidth)||u)&&(s.preventDefault(),a={x:s.targetTouches[0].pageX,y:s.targetTouches[0].pageY})}}));for(var g=0;g<t.core.___slide.length;g++)utils.on(t.core.___slide[g],"touchmove.lg",(function(d){if(utils.hasClass(t.core.outer,"lg-zoomed")){var g,m,h=t.core.___slide[t.core.index].querySelector(".lg-img-wrap");d.preventDefault(),n=!0,s={x:d.targetTouches[0].pageX,y:d.targetTouches[0].pageY},utils.addClass(t.core.outer,"lg-zoom-dragging"),m=u?-Math.abs(h.getAttribute("data-y"))+(s.y-a.y):-Math.abs(h.getAttribute("data-y")),g=c?-Math.abs(h.getAttribute("data-x"))+(s.x-a.x):-Math.abs(h.getAttribute("data-x")),(Math.abs(s.x-a.x)>15||Math.abs(s.y-a.y)>15)&&(h.style.left=g+"px",h.style.top=m+"px")}}));for(var m=0;m<t.core.___slide.length;m++)utils.on(t.core.___slide[m],"touchend.lg",(function(){utils.hasClass(t.core.outer,"lg-zoomed")&&n&&(n=!1,utils.removeClass(t.core.outer,"lg-zoom-dragging"),t.touchendZoom(a,s,c,u))}))},o.prototype.zoomDrag=function(){for(var t=this,a={},s={},n=!1,c=!1,u=!1,d=!1,g=0;g<t.core.___slide.length;g++)utils.on(t.core.___slide[g],"mousedown.lgzoom",(function(s){var c=t.core.___slide[t.core.index].querySelector(".lg-object");d=c.offsetHeight*c.getAttribute("data-scale")>t.core.outer.querySelector(".lg").clientHeight,u=c.offsetWidth*c.getAttribute("data-scale")>t.core.outer.querySelector(".lg").clientWidth,utils.hasClass(t.core.outer,"lg-zoomed")&&utils.hasClass(s.target,"lg-object")&&(u||d)&&(s.preventDefault(),a={x:s.pageX,y:s.pageY},n=!0,t.core.outer.scrollLeft+=1,t.core.outer.scrollLeft-=1,utils.removeClass(t.core.outer,"lg-grab"),utils.addClass(t.core.outer,"lg-grabbing"))}));utils.on(window,"mousemove.lgzoom",(function(g){if(n){var m,h,f=t.core.___slide[t.core.index].querySelector(".lg-img-wrap");c=!0,s={x:g.pageX,y:g.pageY},utils.addClass(t.core.outer,"lg-zoom-dragging"),h=d?-Math.abs(f.getAttribute("data-y"))+(s.y-a.y):-Math.abs(f.getAttribute("data-y")),m=u?-Math.abs(f.getAttribute("data-x"))+(s.x-a.x):-Math.abs(f.getAttribute("data-x")),f.style.left=m+"px",f.style.top=h+"px"}})),utils.on(window,"mouseup.lgzoom",(function(g){n&&(n=!1,utils.removeClass(t.core.outer,"lg-zoom-dragging"),!c||a.x===s.x&&a.y===s.y||(s={x:g.pageX,y:g.pageY},t.touchendZoom(a,s,u,d)),c=!1),utils.removeClass(t.core.outer,"lg-grabbing"),utils.addClass(t.core.outer,"lg-grab")}))},o.prototype.touchendZoom=function(t,a,s,n){var c=this,u=c.core.___slide[c.core.index].querySelector(".lg-img-wrap"),d=c.core.___slide[c.core.index].querySelector(".lg-object"),g=-Math.abs(u.getAttribute("data-x"))+(a.x-t.x),m=-Math.abs(u.getAttribute("data-y"))+(a.y-t.y),h=(c.core.outer.querySelector(".lg").clientHeight-d.offsetHeight)/2,f=Math.abs(d.offsetHeight*Math.abs(d.getAttribute("data-scale"))-c.core.outer.querySelector(".lg").clientHeight+h),p=(c.core.outer.querySelector(".lg").clientWidth-d.offsetWidth)/2,y=Math.abs(d.offsetWidth*Math.abs(d.getAttribute("data-scale"))-c.core.outer.querySelector(".lg").clientWidth+p);(Math.abs(a.x-t.x)>15||Math.abs(a.y-t.y)>15)&&(n&&(m<=-f?m=-f:m>=-h&&(m=-h)),s&&(g<=-y?g=-y:g>=-p&&(g=-p)),n?u.setAttribute("data-y",Math.abs(m)):m=-Math.abs(u.getAttribute("data-y")),s?u.setAttribute("data-x",Math.abs(g)):g=-Math.abs(u.getAttribute("data-x")),u.style.left=g+"px",u.style.top=m+"px")},o.prototype.destroy=function(){var t=this;utils.off(t.core.el,".lgzoom"),utils.off(window,".lgzoom");for(var a=0;a<t.core.___slide.length;a++)utils.off(t.core.___slide[a],".lgzoom");utils.off(t.core.el,".lgtmzoom"),t.resetZoom(),clearTimeout(t.zoomabletimeout),t.zoomabletimeout=!1},window.lgModules.zoom=o}))},{}]},{},[1])(1)}));