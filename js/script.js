const e=window.mdui,t=e.$;function mediaSupported(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}t((function(){t(window).on("scroll",(function(e){0!==(document.documentElement.scrollTop||document.body.scrollTop)?t("#gotop").removeClass("mdui-fab-hide"):t("#gotop").addClass("mdui-fab-hide")})),t("#gotop").on("click",(function(e){!function animateScroll(){var e=document.documentElement.scrollTop||document.body.scrollTop;0!==e&&(window.requestAnimationFrame(animateScroll),window.scrollTo(0,e-e/5))}()}))}));const preferDarkMode=function(){return mediaSupported||localStorage.getItem("mdui-theme-layout-dark")};(mediaSupported||localStorage.getItem("mdui-theme-layout-dark"))&&document.body.classList.toggle("mdui-theme-layout-dark",!0),t((function(){if(t("#dark-mode-button").on("click",(function(e){e.preventDefault(),document.body.classList.contains("mdui-theme-layout-dark")?(document.body.classList.remove("mdui-theme-layout-dark"),localStorage.removeItem("mdui-theme-layout-dark")):(document.body.classList.add("mdui-theme-layout-dark"),localStorage.setItem("mdui-theme-layout-dark","true"))})),t("#donate").length){var o=new e.Tab("#donate .mdui-tab");t("#donate").on("opened.mdui.dialog",(function(e){o.handleUpdate()}))}})),t((function(){t("#sidebar").on("open.mdui.drawer",(function(e){localStorage.removeItem("mdui-drawer-close")})),t("#sidebar").on("close.mdui.drawer",(function(e){localStorage.setItem("mdui-drawer-close",!0)}))})),t((function(){t(".mdui-collapse-item").eq(0).on("close.mdui.collapse",(function(e){localStorage.removeItem("mdui-collapse-item-0")})),t(".mdui-collapse-item").eq(0).on("open.mdui.collapse",(function(e){localStorage.setItem("mdui-collapse-item-0",!0)})),t(".mdui-collapse-item").eq(1).on("close.mdui.collapse",(function(e){localStorage.removeItem("mdui-collapse-item-1")})),t(".mdui-collapse-item").eq(1).on("open.mdui.collapse",(function(e){localStorage.setItem("mdui-collapse-item-1",!0)})),t(".mdui-collapse-item").eq(2).on("close.mdui.collapse",(function(e){localStorage.removeItem("mdui-collapse-item-2")})),t(".mdui-collapse-item").eq(2).on("open.mdui.collapse",(function(e){localStorage.setItem("mdui-collapse-item-2",!0)})),t(".mdui-collapse-item").eq(3).on("close.mdui.collapse",(function(e){localStorage.removeItem("mdui-collapse-item-3")})),t(".mdui-collapse-item").eq(3).on("open.mdui.collapse",(function(e){localStorage.setItem("mdui-collapse-item-3",!0)}))}));var searchFunc=function(e,o,l){t.ajax({url:e,dataType:"xml",success:function(e){var a=t(e).map((function(){return"SEARCH"===this.tagName?this:null})).find("entry").map((function(){return{title:t(this).find("title").text(),content:t(this).find("content").text(),url:t(this).find("url").text()}})).get(),n=t(o)[0],i=t(l)[0];n.addEventListener("input",(function(){var e='<ul class="search-result-list">',t=this.value.trim().toLowerCase().split(/[\s\-]+/);i.innerHTML="",this.value.trim().length<=0||(a.forEach((function(o){var l=!0;o.title&&""!==o.title.trim()||(o.title="Untitled");var a=o.title.trim(),n=a.toLowerCase(),i=o.content.trim().replace(/<[^>]+>/g,""),c=i.toLowerCase(),r=o.url,u=-1,m=-1,s=-1;if(""!==c?t.forEach((function(e,t){u=n.indexOf(e),m=c.indexOf(e),u<0&&m<0?l=!1:(m<0&&(m=0),0==t&&(s=m))})):l=!1,l){e+='<li><a href="'+r+'" class="search-result-title" target="_blank">'+a+"</a>";var d=i;if(s>=0){var p=s-20,f=s+80;p<0&&(p=0),0==p&&(f=100),f>d.length&&(f=d.length);var h=d.substr(p,f);t.forEach((function(e){var t=new RegExp(e,"gi");h=h.replace(t,'<em class="search-result-keyword">$&</em>')})),e+='<p class="search-result-content">'+h+"...</p>"}e+="</li>"}})),e+="</ul>",i.innerHTML=e)}))}})};t((function(){var e=t("#search .search-form-input")[0];t("#search").on("opened.mdui.dialog",(function(t){e.focus()})),t(document).on("click",(function(e){t(e.target).closest("#search").length<=0&&(t(".search-form-input").val(""),t(".search-result").html(""))}));t(window).on("scroll",(function(e){{const e=t(".search-result").attr("data-resource");e&&searchFunc(e,".search-form-input",".search-result")}}))}));