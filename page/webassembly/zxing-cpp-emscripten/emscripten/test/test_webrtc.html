<html lang="en"><head></head><body>

<script async="" src="../../build/zxing.js"></script>
<div id="scanned"></div>
<script>var image,last=Date.now(),DEBUG=0,tick=function(){window.ZXing?(ZXing=ZXing(),testZXing()):setTimeout(tick,10)};function log(){if(DEBUG){var t=Date.now(),e=Array.prototype.slice.call(arguments);e.unshift("+"+(t-last)+"ms"),console.log.apply(console,e),last=t}}function testZXing(){var t=document.createElement("video");t.autoplay=!0,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;function e(t){console.log("Can't access user media",t)}navigator.getUserMedia?navigator.getUserMedia({audio:!1,video:{mandatory:{maxWidth:640,maxHeight:480}}},(function(e){console.log("success",e),t.src=window.URL.createObjectURL(e),t.onclick=function(){t.play()},t.play();var i=ZXing.Runtime.addFunction((function(t,e,i,a,n,o,r,l,d,c,g,s){var h=new Uint8Array(ZXing.HEAPU8.buffer,t,e),u=String.fromCharCode.apply(null,h);0===i&&(window.resultString=""),window.resultString+=u+"<br>",ctx.fillStyle="red",ctx.fillRect(n-5,o-5,10,10),ctx.fillStyle="green",ctx.fillRect(r-5,l-5,10,10),ctx.fillStyle="blue",ctx.fillRect(d-5,c-5,10,10),ctx.fillStyle="purple",ctx.fillRect(g-5,s-5,10,10)}));!function e(){if(requestAnimationFrame(e),t.videoWidth){if(!image){width=t.videoWidth,height=t.videoHeight,log("video",width,height,t);var a=document.createElement("canvas");return a.width=width,a.height=height,a.style.transform="scale(-1, 1)",ctx=a.getContext("2d"),document.body.appendChild(a),log("start"),void log("_xsetup",image=ZXing._resize(width,height),"pointer")}log("interval"),console.time("a"),ctx.drawImage(t,0,0,width,height);var n=ctx.getImageData(0,0,width,height);data=n.data;for(var o=0,r=0;o<data.length;o+=4,r++)ZXing.HEAPU8[image+r]=.2989*data[o+0]+.587*data[o+1]+.114*data[o+2];var l=ZXing._decode_qr_multi(i),d=l?"error: "+l:window.resultString;scanned.innerHTML=d,console.timeEnd("a")}}()}),e):e("")}tick()</script>


</body></html>