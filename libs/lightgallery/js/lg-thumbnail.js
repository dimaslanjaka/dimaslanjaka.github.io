/**!
 * lg-thumbnail.js | 0.0.4 | August 9th 2016
 * http://sachinchoolur.github.io/lg-thumbnail.js
 * Copyright (c) 2016 Sachin N; 
 * @license Apache 2.0 
 */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).LgThumbnail=t()}}((function(){return function e(t,i,o){function s(r,l){if(!i[r]){if(!t[r]){var h="function"==typeof require&&require;if(!l&&h)return h(r,!0);if(u)return u(r,!0);var n=new Error("Cannot find module '"+r+"'");throw n.code="MODULE_NOT_FOUND",n}var a=i[r]={exports:{}};t[r][0].call(a.exports,(function(i){var o=t[r][1][i];return s(o||i)}),a,a.exports,e,t,i,o)}return i[r].exports}for(var u="function"==typeof require&&require,r=0;r<o.length;r++)s(o[r]);return s}({1:[function(t,i,o){!function(t,i){if(void 0!==o)i();else{i(),t.lgThumbnail={}}}(this,(function(){"use strict";var t=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(t[u]=o[u])}return t},i={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbContHeight:100,thumbMargin:5,exThumbImage:!1,showThumbByDefault:!0,toggleThumb:!0,pullCaptionUp:!0,enableThumbDrag:!0,enableThumbSwipe:!0,swipeThreshold:50,loadYoutubeThumbnail:!0,youtubeThumbSize:1,loadVimeoThumbnail:!0,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:!0},Thumbnail=function(o){return this.el=o,this.core=window.lgData[this.el.getAttribute("lg-uid")],this.core.s=t({},i,this.core.s),this.thumbOuter=null,this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin),this.thumbIndex=this.core.index,this.left=0,this.init(),this};Thumbnail.prototype.init=function(){var t=this;this.core.s.thumbnail&&this.core.items.length>1&&(this.core.s.showThumbByDefault&&setTimeout((function(){utils.addClass(t.core.outer,"lg-thumb-open")}),700),this.core.s.pullCaptionUp&&utils.addClass(this.core.outer,"lg-pull-caption-up"),this.build(),this.core.s.animateThumb?(this.core.s.enableThumbDrag&&!this.core.isTouch&&this.core.doCss()&&this.enableThumbDrag(),this.core.s.enableThumbSwipe&&this.core.isTouch&&this.core.doCss()&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toggle(),this.thumbkeyPress())},Thumbnail.prototype.build=function(){var t,i=this,o="",u="";switch(this.core.s.vimeoThumbSize){case"thumbnail_large":u="640";break;case"thumbnail_medium":u="200x150";break;case"thumbnail_small":u="100x75"}function getThumb(t,r,l){var h,n=i.core.isVideo(t,l)||{},a="";n.youtube||n.vimeo||n.dailymotion?n.youtube?h=i.core.s.loadYoutubeThumbnail?"//img.youtube.com/vi/"+n.youtube[1]+"/"+i.core.s.youtubeThumbSize+".jpg":r:n.vimeo?i.core.s.loadVimeoThumbnail?(h="//i.vimeocdn.com/video/error_"+u+".jpg",a=n.vimeo[1]):h=r:n.dailymotion&&(h=i.core.s.loadDailymotionThumbnail?"//www.dailymotion.com/thumbnail/video/"+n.dailymotion[1]:r):h=r,o+='<div data-vimeo-id="'+a+'" class="lg-thumb-item" style="width:'+i.core.s.thumbWidth+"px; margin-right: "+i.core.s.thumbMargin+'px"><img src="'+h+'" /></div>',a=""}if(utils.addClass(i.core.outer,"lg-has-thumb"),i.core.outer.querySelector(".lg").insertAdjacentHTML("beforeend",'<div class="lg-thumb-outer"><div class="lg-thumb group"></div></div>'),i.thumbOuter=i.core.outer.querySelector(".lg-thumb-outer"),i.thumbOuterWidth=i.thumbOuter.offsetWidth,i.core.s.animateThumb&&(i.core.outer.querySelector(".lg-thumb").style.width=i.thumbTotalWidth+"px",i.core.outer.querySelector(".lg-thumb").style.position="relative"),this.core.s.animateThumb&&(i.thumbOuter.style.height=i.core.s.thumbContHeight+"px"),i.core.s.dynamic)for(var r=0;r<i.core.s.dynamicEl.length;r++)getThumb(i.core.s.dynamicEl[r].src,i.core.s.dynamicEl[r].thumb,r);else for(var l=0;l<i.core.items.length;l++)i.core.s.exThumbImage?getThumb(i.core.items[l].getAttribute("href")||i.core.items[l].getAttribute("data-src"),i.core.items[l].getAttribute(i.core.s.exThumbImage),l):getThumb(i.core.items[l].getAttribute("href")||i.core.items[l].getAttribute("data-src"),i.core.items[l].querySelector("img").getAttribute("src"),l);i.core.outer.querySelector(".lg-thumb").innerHTML=o,t=i.core.outer.querySelectorAll(".lg-thumb-item");for(var h=0;h<t.length;h++)!function(o){var u=t[o],r=u.getAttribute("data-vimeo-id");if(r){window["lgJsonP"+i.el.getAttribute("lg-uid")+h]=function(t){u.querySelector("img").setAttribute("src",t[0][i.core.s.vimeoThumbSize])};var l=document.createElement("script");l.className="lg-script",l.src="//www.vimeo.com/api/v2/video/"+r+".json?callback=lgJsonP"+i.el.getAttribute("lg-uid")+h,document.body.appendChild(l)}}(h);utils.addClass(t[i.core.index],"active"),utils.on(i.core.el,"onBeforeSlide.lgtm",(function(){for(var o=0;o<t.length;o++)utils.removeClass(t[o],"active");utils.addClass(t[i.core.index],"active")}));for(var n=0;n<t.length;n++)!function(o){utils.on(t[o],"click.lg touchend.lg",(function(){setTimeout((function(){(i.thumbClickable&&!i.core.lgBusy||!i.core.doCss())&&(i.core.index=o,i.core.slide(i.core.index,!1,!0))}),50)}))}(n);utils.on(i.core.el,"onBeforeSlide.lgtm",(function(){i.animateThumb(i.core.index)})),utils.on(window,"resize.lgthumb orientationchange.lgthumb",(function(){setTimeout((function(){i.animateThumb(i.core.index),i.thumbOuterWidth=i.thumbOuter.offsetWidth}),200)}))},Thumbnail.prototype.setTranslate=function(t){utils.setVendor(this.core.outer.querySelector(".lg-thumb"),"Transform","translate3d(-"+t+"px, 0px, 0px)")},Thumbnail.prototype.animateThumb=function(t){var i=this.core.outer.querySelector(".lg-thumb");if(this.core.s.animateThumb){var o;switch(this.core.s.currentPagerPosition){case"left":o=0;break;case"middle":o=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case"right":o=this.thumbOuterWidth-this.core.s.thumbWidth}this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*t-1-o,this.left>this.thumbTotalWidth-this.thumbOuterWidth&&(this.left=this.thumbTotalWidth-this.thumbOuterWidth),this.left<0&&(this.left=0),this.core.lGalleryOn?(utils.hasClass(i,"on")||utils.setVendor(this.core.outer.querySelector(".lg-thumb"),"TransitionDuration",this.core.s.speed+"ms"),this.core.doCss()||(i.style.left=-this.left+"px")):this.core.doCss()||(i.style.left=-this.left+"px"),this.setTranslate(this.left)}},Thumbnail.prototype.enableThumbDrag=function(){var t=this,i=0,o=0,u=!1,r=!1,l=0;utils.addClass(t.thumbOuter,"lg-grab"),utils.on(t.core.outer.querySelector(".lg-thumb"),"mousedown.lgthumb",(function(o){t.thumbTotalWidth>t.thumbOuterWidth&&(o.preventDefault(),i=o.pageX,u=!0,t.core.outer.scrollLeft+=1,t.core.outer.scrollLeft-=1,t.thumbClickable=!1,utils.removeClass(t.thumbOuter,"lg-grab"),utils.addClass(t.thumbOuter,"lg-grabbing"))})),utils.on(window,"mousemove.lgthumb",(function(h){u&&(l=t.left,r=!0,o=h.pageX,utils.addClass(t.thumbOuter,"lg-dragging"),(l-=o-i)>t.thumbTotalWidth-t.thumbOuterWidth&&(l=t.thumbTotalWidth-t.thumbOuterWidth),l<0&&(l=0),t.setTranslate(l))})),utils.on(window,"mouseup.lgthumb",(function(){r?(r=!1,utils.removeClass(t.thumbOuter,"lg-dragging"),t.left=l,Math.abs(o-i)<t.core.s.swipeThreshold&&(t.thumbClickable=!0)):t.thumbClickable=!0,u&&(u=!1,utils.removeClass(t.thumbOuter,"lg-grabbing"),utils.addClass(t.thumbOuter,"lg-grab"))}))},Thumbnail.prototype.enableThumbSwipe=function(){var t=this,i=0,o=0,u=!1,r=0;utils.on(t.core.outer.querySelector(".lg-thumb"),"touchstart.lg",(function(o){t.thumbTotalWidth>t.thumbOuterWidth&&(o.preventDefault(),i=o.targetTouches[0].pageX,t.thumbClickable=!1)})),utils.on(t.core.outer.querySelector(".lg-thumb"),"touchmove.lg",(function(l){t.thumbTotalWidth>t.thumbOuterWidth&&(l.preventDefault(),o=l.targetTouches[0].pageX,u=!0,utils.addClass(t.thumbOuter,"lg-dragging"),r=t.left,(r-=o-i)>t.thumbTotalWidth-t.thumbOuterWidth&&(r=t.thumbTotalWidth-t.thumbOuterWidth),r<0&&(r=0),t.setTranslate(r))})),utils.on(t.core.outer.querySelector(".lg-thumb"),"touchend.lg",(function(){t.thumbTotalWidth>t.thumbOuterWidth&&u?(u=!1,utils.removeClass(t.thumbOuter,"lg-dragging"),Math.abs(o-i)<t.core.s.swipeThreshold&&(t.thumbClickable=!0),t.left=r):t.thumbClickable=!0}))},Thumbnail.prototype.toggle=function(){var t=this;t.core.s.toggleThumb&&(utils.addClass(t.core.outer,"lg-can-toggle"),t.thumbOuter.insertAdjacentHTML("beforeend",'<span class="lg-toggle-thumb lg-icon"></span>'),utils.on(t.core.outer.querySelector(".lg-toggle-thumb"),"click.lg",(function(){utils.hasClass(t.core.outer,"lg-thumb-open")?utils.removeClass(t.core.outer,"lg-thumb-open"):utils.addClass(t.core.outer,"lg-thumb-open")})))},Thumbnail.prototype.thumbkeyPress=function(){var t=this;utils.on(window,"keydown.lgthumb",(function(i){38===i.keyCode?(i.preventDefault(),utils.addClass(t.core.outer,"lg-thumb-open")):40===i.keyCode&&(i.preventDefault(),utils.removeClass(t.core.outer,"lg-thumb-open"))}))},Thumbnail.prototype.destroy=function(){if(this.core.s.thumbnail&&this.core.items.length>1){utils.off(window,".lgthumb"),this.thumbOuter.parentNode.removeChild(this.thumbOuter),utils.removeClass(this.core.outer,"lg-has-thumb");for(var t=document.getElementsByClassName("lg-script");t[0];)t[0].parentNode.removeChild(t[0])}},window.lgModules.thumbnail=Thumbnail}))},{}]},{},[1])(1)}));