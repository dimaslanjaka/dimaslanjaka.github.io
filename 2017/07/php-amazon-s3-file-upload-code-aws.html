<!DOCTYPE html><html lang="en"><head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin="">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="manifest" href="/manifest.json">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"www.webmanajemen.com","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.13.1","exturl":false,"sidebar":{"position":"right","display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Amazon offers a PHP SDK for taking care of AWS and S asks for, yet it tips the scales at more than 500 documents and almost 5MB. In the">
<meta property="og:type" content="article">
<meta property="og:title" content="PHP Amazon S3 File Upload Code AWS Signature Version 4">
<meta property="og:url" content="https://www.webmanajemen.com/2017/07/php-amazon-s3-file-upload-code-aws.html">
<meta property="og:site_name" content="WMI">
<meta property="og:description" content="Amazon offers a PHP SDK for taking care of AWS and S asks for, yet it tips the scales at more than 500 documents and almost 5MB. In the">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/2048px-No_image_available.svg.png">
<meta property="article:published_time" content="2017-07-23T17:44:00.000Z">
<meta property="article:modified_time" content="2017-07-23T17:44:02.000Z">
<meta property="article:author" content="Dimas Lanjaka">
<meta property="article:tag" content="PHP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/2048px-No_image_available.svg.png">


<link rel="canonical" href="https://www.webmanajemen.com/2017/07/php-amazon-s3-file-upload-code-aws.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://www.webmanajemen.com/2017/07/php-amazon-s3-file-upload-code-aws.html","path":"/2017/07/php-amazon-s3-file-upload-code-aws.html","title":"PHP Amazon S3 File Upload Code AWS Signature Version 4"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>PHP Amazon S3 File Upload Code AWS Signature Version 4 | WMI</title>
  
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-106238155-1"></script>
  <script class="next-config" data-name="google_analytics" type="application/json">{"tracking_id":"UA-106238155-1","only_pageview":false}</script>
  <script src="/js/third-party/analytics/google-analytics.js"></script>





<style>
  /* fix index title overload the body width */
  a.post-title-link {
    max-width: 100%;
  }
  /* fix long image in homepage */
  .main-inner.index .post-gallery .post-gallery-image img {
    height: 300px;
    object-fit: cover;
    opacity: 1;
    width: 100%;
    object-position: top;
  }
</style>
<link rel="stylesheet" type="text/css" href="/css/injector/main.css">
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="WMI" type="application/atom+xml">
<link rel="alternate" href="/rss.xml" title="WMI" type="application/rss+xml">
<link id="sitemap-site-url" type="application/text+xml" rel="sitemap" href="https://www.webmanajemen.com/sitemap.xml"><link id="rss-site-url" type="application/rss+xml" rel="alternate" href="https://www.webmanajemen.com/rss.xml"><link id="atom-site-url" type="application/atom+xml" rel="alternate" href="https://www.webmanajemen.com/atom.xml"></head>

<body itemscope="" itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">WMI</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Website Management Indonesia</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-privacy"><a href="/p/privacy.html" rel="section"><i class="fa fa-shield fa-fw"></i>privacy</a></li><li class="menu-item menu-item-tos"><a href="/p/tos.html" rel="section"><i class="fa fa-shield fa-fw"></i>tos</a></li><li class="menu-item menu-item-chimeraland"><a href="/chimeraland" rel="section"><i class="fa fa-archive fa-fw"></i>chimeraland</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="Searching..." spellcheck="false" type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Dimas Lanjaka</p>
  <div class="site-description" itemprop="description">Website Management Indonesia is a blog about scripts, tips and tricks, games, software. Covering php, javascript, jquery, mysql, seo, e-commerce and others.</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">1399</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">categories</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">124</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cHM6Ly9naXRodWIuY29tL2RpbWFzbGFuamFrYQ==" title="GitHub → https://github.com/dimaslanjaka" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:dimaslanjaka@gmail.com" title="E-Mail → mailto:dimaslanjaka@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3NlY3JldG5ldHdvcmtmb3JjZXM=" title="FB Page → https://www.facebook.com/secretnetworkforces" rel="noopener" target="_blank"><i class="fab fa-facebook fa-fw"></i>FB Page</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  <div class="post-gallery" itemscope="" itemtype="http://schema.org/ImageGallery">
    
    <div class="post-gallery-image">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/2048px-No_image_available.svg.png" itemprop="contentUrl">
    </div>
    </div>

  <article itemscope="" itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.webmanajemen.com/2017/07/php-amazon-s3-file-upload-code-aws.html">

    <span hidden="" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Dimas Lanjaka">
    </span>

    <span hidden="" itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WMI">
      <meta itemprop="description" content="Website Management Indonesia is a blog about scripts, tips and tricks, games, software. Covering php, javascript, jquery, mysql, seo, e-commerce and others.">
    </span>

    <span hidden="" itemprop="post" itemscope="" itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="PHP Amazon S3 File Upload Code AWS Signature Version 4 | WMI">
      <meta itemprop="description" content="Amazon offers a PHP SDK for taking care of AWS and S asks for, yet it tips the scales at more than 500 documents and almost 5MB. In the">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          PHP Amazon S3 File Upload Code AWS Signature Version 4
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2017-07-24 00:44:00 / Modified: 00:44:02" itemprop="dateCreated datePublished" datetime="2017-07-24T00:44:00+07:00">2017-07-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
          <a href="/categories/uncategorized/" itemprop="url" rel="index"><span itemprop="name">uncategorized</span></a>
        </span>
    </span>

  
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2017/07/php-amazon-s3-file-upload-code-aws.html#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="/2017/07/php-amazon-s3-file-upload-code-aws.html" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

            <div class="post-description">Amazon offers a PHP SDK for taking care of AWS and S asks for, yet it tips the scales at more than 500 documents and almost 5MB. In the</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p><span id="span_a5da_0">Amazon offers a PHP SDK for taking care of AWS and S3 asks for, yet it tips the scales at more than 500 documents and almost 5MB. In the event that you simply need to transfer a record to a S3 basin utilizing PHP, you can make the HTTP POST ask for yourself utilizing just around 50 lines of code. This is likewise helpful on the off chance that you need to see how the demand and approval prepare function.</span><br><br id="br_a5da_1"><b id="b_a5da_0">AWS Signature Version 4</b><br><span id="span_a5da_1">This code uses Amazon AWS Signature Version 4. To view the old Version 2 code, see&amp;nbsp;</span><a target="_blank" href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cHM6Ly93d3cuaDN4ZWQuY29tL3Byb2dyYW1taW5nL3NpbXBsZS1waHAtY29kZS1mb3ItdXBsb2FkaW5nLWEtZmlsZS10by1hbi1hbWF6b24tczMtYnVja2V0" id="a_a5da_0" rel="noopener noreferer nofollow noopener">this post</a><span id="span_a5da_2">.</span><br><br id="br_a5da_4"><b id="b_a5da_1">Sample Code</b><br>This is test PHP code to help you comprehend and test transferring to Amazon S3. Requires PHP variant 5.4 or fresher because of exhibit language structure. On the off chance that you need to utilize this in your venture, you ought to most likely alter this and place it into a capacity or strategy. I have it designed like this particularly to help demonstrate how the procedure functions.<br><br>Perused the inline code remarks for a clarification of each segment:<br><br id="br_a5da_9"></p><pre><code id="code_a5da_0">&lt;?php<br><br><span id="span_a5da_5">//&nbsp;USER&nbsp;OPTIONS</span><br><span id="span_a5da_6">//&nbsp;Replace&nbsp;these&nbsp;values&nbsp;with&nbsp;ones&nbsp;appropriate&nbsp;to&nbsp;you.</span><br>$accessKeyId&nbsp;=&nbsp;'YOUR_ACCESS_KEY_ID';<br>$secretKey&nbsp;=&nbsp;'YOUR_SECRET_KEY';<br>$bucket&nbsp;=&nbsp;'YOUR_BUCKET_NAME';<br>$region&nbsp;=&nbsp;'BUCKET_AMAZON_REGION';&nbsp;<span id="span_a5da_7">//&nbsp;us-west-2,&nbsp;us-east-1,&nbsp;etc</span><br>$acl&nbsp;=&nbsp;'ACCESS_CONTROL_LIST';&nbsp;<span id="span_a5da_8">//&nbsp;private,&nbsp;public-read,&nbsp;etc</span><br>$filePath&nbsp;=&nbsp;'path/to/file.jpg';<br>$fileName&nbsp;=&nbsp;'myimage.jpg';<br>$fileType&nbsp;=&nbsp;'image/jpeg';<br><br><span id="span_a5da_9">//&nbsp;VARIABLES</span><br><span id="span_a5da_10">//&nbsp;These&nbsp;are&nbsp;used&nbsp;throughout&nbsp;the&nbsp;request.</span><br>$longDate&nbsp;=&nbsp;gmdate('Ymd\THis\Z');<br>$shortDate&nbsp;=&nbsp;gmdate('Ymd');<br>$credential&nbsp;=&nbsp;$accessKeyId&nbsp;.&nbsp;'/'&nbsp;.&nbsp;$shortDate&nbsp;.&nbsp;'/'&nbsp;.&nbsp;$region&nbsp;.&nbsp;'/s3/aws4_request';<br><br><span id="span_a5da_11">//&nbsp;POST&nbsp;POLICY</span><br><span id="span_a5da_12">//&nbsp;Amazon&nbsp;requires&nbsp;a&nbsp;base64-encoded&nbsp;POST&nbsp;policy&nbsp;written&nbsp;in&nbsp;JSON.</span><br><span id="span_a5da_13">//&nbsp;This&nbsp;tells&nbsp;Amazon&nbsp;what&nbsp;is&nbsp;acceptable&nbsp;for&nbsp;this&nbsp;request.&nbsp;For</span><br><span id="span_a5da_14">//&nbsp;simplicity,&nbsp;we&nbsp;set&nbsp;the&nbsp;expiration&nbsp;date&nbsp;to&nbsp;always&nbsp;be&nbsp;24H&nbsp;in&nbsp;</span><br><span id="span_a5da_15">//&nbsp;the&nbsp;future.&nbsp;The&nbsp;two&nbsp;"starts-with"&nbsp;fields&nbsp;are&nbsp;used&nbsp;to&nbsp;restrict</span><br><span id="span_a5da_16">//&nbsp;the&nbsp;content&nbsp;of&nbsp;"key"&nbsp;and&nbsp;"Content-Type",&nbsp;which&nbsp;are&nbsp;specified</span><br><span id="span_a5da_17">//&nbsp;later&nbsp;in&nbsp;the&nbsp;POST&nbsp;fields.&nbsp;Again&nbsp;for&nbsp;simplicity,&nbsp;we&nbsp;use&nbsp;blank</span><br><span id="span_a5da_18">//&nbsp;values&nbsp;('')&nbsp;to&nbsp;not&nbsp;put&nbsp;any&nbsp;restrictions&nbsp;on&nbsp;those&nbsp;two&nbsp;fields.</span><br>$policy&nbsp;=&nbsp;base64_encode(json_encode([<br>&nbsp;&nbsp;&nbsp;&nbsp;'expiration'&nbsp;=&gt;&nbsp;gmdate('Y-m-d\TH:i:s\Z',&nbsp;time()&nbsp;+&nbsp;86400),<br>&nbsp;&nbsp;&nbsp;&nbsp;'conditions'&nbsp;=&gt;&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['acl'&nbsp;=&gt;&nbsp;$acl],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['bucket'&nbsp;=&gt;&nbsp;$bucket],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['starts-with',&nbsp;'$Content-Type',&nbsp;''],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['starts-with',&nbsp;'$key',&nbsp;''],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['x-amz-algorithm'&nbsp;=&gt;&nbsp;'AWS4-HMAC-SHA256'],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['x-amz-credential'&nbsp;=&gt;&nbsp;$credential],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;['x-amz-date'&nbsp;=&gt;&nbsp;$longDate]<br>&nbsp;&nbsp;&nbsp;&nbsp;]<br>]));<br><br><span id="span_a5da_19">//&nbsp;SIGNATURE</span><br><span id="span_a5da_20">//&nbsp;A&nbsp;base64-encoded&nbsp;HMAC&nbsp;hashed&nbsp;signature&nbsp;with&nbsp;your&nbsp;secret&nbsp;key.</span><br><span id="span_a5da_21">//&nbsp;This&nbsp;is&nbsp;used&nbsp;so&nbsp;Amazon&nbsp;can&nbsp;verify&nbsp;your&nbsp;request,&nbsp;and&nbsp;will&nbsp;be</span><br><span id="span_a5da_22">//&nbsp;passed&nbsp;along&nbsp;in&nbsp;a&nbsp;POST&nbsp;field&nbsp;later.</span><br>$signingKey&nbsp;=&nbsp;hash_hmac('sha256',&nbsp;$shortDate,&nbsp;'AWS4'&nbsp;.&nbsp;$secretKey,&nbsp;true);<br>$signingKey&nbsp;=&nbsp;hash_hmac('sha256',&nbsp;$region,&nbsp;$signingKey,&nbsp;true);<br>$signingKey&nbsp;=&nbsp;hash_hmac('sha256',&nbsp;'s3',&nbsp;$signingKey,&nbsp;true);<br>$signingKey&nbsp;=&nbsp;hash_hmac('sha256',&nbsp;'aws4_request',&nbsp;$signingKey,&nbsp;true);<br>$signature&nbsp;=&nbsp;hash_hmac('sha256',&nbsp;$policy,&nbsp;$signingKey);<br><br><span id="span_a5da_23">//&nbsp;CURL</span><br><span id="span_a5da_24">//&nbsp;The&nbsp;cURL&nbsp;request.&nbsp;Passes&nbsp;in&nbsp;the&nbsp;full&nbsp;URL&nbsp;to&nbsp;your&nbsp;Amazon&nbsp;bucket.</span><br><span id="span_a5da_25">//&nbsp;Sets&nbsp;RETURNTRANSFER&nbsp;and&nbsp;HEADER&nbsp;to&nbsp;true&nbsp;to&nbsp;see&nbsp;the&nbsp;full&nbsp;response&nbsp;from</span><br><span id="span_a5da_26">//&nbsp;Amazon,&nbsp;including&nbsp;body&nbsp;and&nbsp;head.&nbsp;Sets&nbsp;POST&nbsp;fields&nbsp;for&nbsp;cURL.</span><br><span id="span_a5da_27">//&nbsp;Then&nbsp;executes&nbsp;the&nbsp;cURL&nbsp;request.</span><br>$ch&nbsp;=&nbsp;curl_init('https://'&nbsp;.&nbsp;$bucket&nbsp;.&nbsp;'.s3-'&nbsp;.&nbsp;$region&nbsp;.&nbsp;'.amazonaws.com');<br>curl_setopt($ch,&nbsp;CURLOPT_RETURNTRANSFER,&nbsp;true);<br>curl_setopt($ch,&nbsp;CURLOPT_HEADER,&nbsp;true);<br>curl_setopt($ch,&nbsp;CURLOPT_POST,&nbsp;true);<br>curl_setopt($ch,&nbsp;CURLOPT_POSTFIELDS,&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;'Content-Type'&nbsp;=&gt;&nbsp;&nbsp;$fileType,<br>&nbsp;&nbsp;&nbsp;&nbsp;'acl'&nbsp;=&gt;&nbsp;$acl,<br>&nbsp;&nbsp;&nbsp;&nbsp;'key'&nbsp;=&gt;&nbsp;$fileName,<br>&nbsp;&nbsp;&nbsp;&nbsp;'policy'&nbsp;=&gt;&nbsp;&nbsp;$policy,<br>&nbsp;&nbsp;&nbsp;&nbsp;'x-amz-algorithm'&nbsp;=&gt;&nbsp;'AWS4-HMAC-SHA256',<br>&nbsp;&nbsp;&nbsp;&nbsp;'x-amz-credential'&nbsp;=&gt;&nbsp;$credential,<br>&nbsp;&nbsp;&nbsp;&nbsp;'x-amz-date'&nbsp;=&gt;&nbsp;$longDate,<br>&nbsp;&nbsp;&nbsp;&nbsp;'x-amz-signature'&nbsp;=&gt;&nbsp;$signature,<br>&nbsp;&nbsp;&nbsp;&nbsp;'file'&nbsp;=&gt;&nbsp;new&nbsp;CurlFile(realpath($filePath),&nbsp;$fileType,&nbsp;$fileName)<br>]);<br>$response&nbsp;=&nbsp;curl_exec($ch);<br><br><span id="span_a5da_28">//&nbsp;RESPONSE</span><br><span id="span_a5da_29">//&nbsp;If&nbsp;Amazon&nbsp;returns&nbsp;a&nbsp;response&nbsp;code&nbsp;of&nbsp;204,&nbsp;the&nbsp;request&nbsp;was</span><br><span id="span_a5da_30">//&nbsp;successful&nbsp;and&nbsp;the&nbsp;file&nbsp;should&nbsp;be&nbsp;sitting&nbsp;in&nbsp;your&nbsp;Amazon&nbsp;S3</span><br><span id="span_a5da_31">//&nbsp;bucket.&nbsp;If&nbsp;a&nbsp;code&nbsp;other&nbsp;than&nbsp;204&nbsp;is&nbsp;returned,&nbsp;there&nbsp;will&nbsp;be&nbsp;an</span><br><span id="span_a5da_32">//&nbsp;XML-formatted&nbsp;error&nbsp;code&nbsp;in&nbsp;the&nbsp;body.&nbsp;For&nbsp;simplicity,&nbsp;we&nbsp;use</span><br><span id="span_a5da_33">//&nbsp;substr&nbsp;to&nbsp;extract&nbsp;the&nbsp;error&nbsp;code&nbsp;and&nbsp;output&nbsp;it.</span><br>if&nbsp;(curl_getinfo($ch,&nbsp;CURLINFO_HTTP_CODE)&nbsp;==&nbsp;204)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;'Success!';<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;$error&nbsp;=&nbsp;substr($response,&nbsp;strpos($response,&nbsp;'&lt;code&gt;')&nbsp;+&nbsp;6);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;substr($error,&nbsp;0,&nbsp;strpos($error,&nbsp;'&lt;/code&gt;'));<br>}</code></pre><pre><span id="span_a5da_34">If you aren't receiving any response at all, check if&nbsp;</span><samp id="samp_a5da_0">curl_exec($ch)</samp><span id="span_a5da_35">&nbsp;is returning false. If it is, chances are it's due to an SSL issue. You can check the error at&nbsp;</span><samp id="samp_a5da_1">curl_error($ch)</samp><span id="span_a5da_36">. For testing purposes, you can set these two additional cURL options and see if it works:</span></pre><pre><code id="code_a5da_1">curl_setopt($ch,&nbsp;CURLOPT_SSL_VERIFYPEER,&nbsp;false);<br>curl_setopt($ch,&nbsp;CURLOPT_SSL_VERIFYHOST,&nbsp;0);</code></pre><span id="span_a5da_37">But note that doing this is very insecure. Read&amp;nbsp;</span><a href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMTE5NTUzMC9kb2VzLXR1cm5pbmctb2ZmLWN1cmxvcHQtc3NsLXZlcmlmeXBlZXItaW4tY3VybC1tYWtlLXRyYW5zbWlzc2lvbi1pbnNlY3VyZQ==" id="a_a5da_1" target="_blank" rel="noopener noreferer nofollow">this Stackoverflow post</a><span id="span_a5da_38">&amp;nbsp;and&amp;nbsp;</span><a href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cDovL3VuaXRzdGVwLm5ldC9ibG9nLzIwMDkvMDUvMDUvdXNpbmctY3VybC1pbi1waHAtdG8tYWNjZXNzLWh0dHBzLXNzbHRscy1wcm90ZWN0ZWQtc2l0ZXMv" id="a_a5da_2" target="_blank" rel="noopener noreferer nofollow">this blog post</a><span id="span_a5da_39">.</span><br><br>Source: hex3d.com<p></p>

    </div>

    
    
    
      


    <footer class="post-footer"><div id="keywords">
  
  
</div>

          <div class="post-tags">
              <a href="/tags/PHP/" rel="tag"># PHP</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2017/07/an-alternative-way-to-resolve-submit.html" rel="prev" title="An alternative way to resolve the submit button is not working or return to home">
                  <i class="fa fa-chevron-left"></i> An alternative way to resolve the submit button is not working or return to home
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2017/07/cara-ping-mesin-pencari-dengan-curl.html" rel="next" title="Cara ping mesin pencari dengan curl">
                  Cara ping mesin pencari dengan curl <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments" id="disqus_thread">
    <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
  </div>
  
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  © 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dimas Lanjaka</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lozad.js/1.16.0/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  




<script class="next-config" data-name="disqus" type="application/json">{"enable":true,"shortname":"dimaslanjaka","count":true,"i18n":{"disqus":"disqus"}}</script>
<script src="/js/third-party/comments/disqus.js"></script>
<!-- adblock notify -->
<div id="ykth" class="ykth-hide">
  <div class="ykth-inner">
    <div class="ykth-head">
      <svg style="width: 30px; height: 30px" viewBox="0 0 26 26">
        <path fill="#FFFFFF" d="M13,13H11V7H13M12,17.3A1.3,1.3 0 0,1 10.7,16A1.3,1.3 0 0,1 12,14.7A1.3,1.3 0 0,1 13.3,16A1.3,1.3 0 0,1 12,17.3M15.73,3H8.27L3,8.27V15.73L8.27,21H15.73L21,15.73V8.27L15.73,3Z"></path>
      </svg>
      <b>Adblock detected</b>
      <p>We have detected that you are using adblock in your browser</p>
      <i class="close" id="close-notif">×</i>
    </div>
    <div class="ykth-body">
      <p>
        We have detected that you are using adblock in your browser on page
        <b id="adblock-page-title">
          
          PHP Amazon S3 File Upload Code AWS Signature Version 4
          
        </b>
        you've visited.
      </p>
      <p>
        Our website is made possible by displaying online advertisements to our
        visitors.
      </p>
      <ul>
        Our advertiser
        <li>Google Adsense</li>
      </ul>
      <p>
        Please consider supporting us by disabling your ad blocker. Thank you.
      </p>
    </div>
    <!-- Start Condition When JS Disable -->
    <noscript>
      <div class="ykth-body">
        <p>Javascript is disabled in your web browser.</p>
        <p>
          For full functionality of this site it is necessary to enable
          JavaScript. Here are the
          <a href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cHM6Ly93d3cuZW5hYmxlLWphdmFzY3JpcHQuY29tLw==" target="_blank">
            instructions how to enable JavaScript in your web browser</a>.
        </p>
      </div>
      <style>
        #ykth {
          display: block !important;
        }

        .ykth-inner > .ykth-body {
          display: none;
        }

        .ykth-head > b,
        .ykth-head > p {
          font-size: 0;
        }

        .ykth-head > b:before {
          content: 'Javascript Detected';
          font-size: 16px;
        }

        .ykth-head > p:before {
          content: 'We have detected that you are disable javascript in your browser';
          font-size: 14px;
        }
      </style>
    </noscript>
    <!-- End Condition When JS Disable -->
  </div>
</div>

<script src="/assets/adblock-notify/script.js"></script>
<link rel="stylesheet" href="/assets/adblock-notify/style.css">
<script>
  document.addEventListener('DOMContentLoaded', function (event) {
    setTimeout(() => {
      const titleBold = document.getElementById('adblock-page-title');
      if (titleBold) {
        const contains404 = /404/i.test(titleBold.textContent);
        const isWMI = /^wmi$/i.test(titleBold.textContent.trim());
        const isEmpty = titleBold.textContent.trim().length === 0;
        if (contains404 || isWMI || isEmpty) {
          titleBold.textContent = document.title;
        }
      }
    }, 1000);
  });
</script>
<script src="/r-ads.js"></script>
<style>
  .bannerAds {
    display: block;
    background: #fff url(//i.imgur.com/mBbv90p.png) no-repeat top right;
    color: #303030;
    min-height: 180px;
    min-width: 250px;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
  }
</style>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(91118654, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/91118654" style="position:absolute; left:-9999px;" alt=""></div></noscript>
<!-- /Yandex.Metrika counter -->
<script id="ribbon" size="300" alpha="0.6" zindex="-1" src="//cdn.jsdelivr.net/gh/theme-next/theme-next-canvas-ribbon@1/canvas-ribbon.js"></script><script>
  (function () {
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
  })();
</script>



</body></html>