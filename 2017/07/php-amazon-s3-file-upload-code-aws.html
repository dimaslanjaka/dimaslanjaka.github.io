<!DOCTYPE html><html lang="[&quot;id&quot;,&quot;en&quot;,&quot;zh-TW&quot;,&quot;zh-CN&quot;,&quot;zh-HK&quot;,&quot;th&quot;,&quot;tl&quot;,&quot;default&quot;]" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>PHP Amazon S3 File Upload Code AWS Signature Version 4 | WMI</title><meta name="author" content="Dimas Lanjaka"><meta name="copyright" content="Dimas Lanjaka"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Amazon offers a PHP SDK for taking care of AWS and S asks for, yet it tips the scales at more than 500 documents and almost 5MB. In the">
<meta property="og:type" content="article">
<meta property="og:title" content="PHP Amazon S3 File Upload Code AWS Signature Version 4">
<meta property="og:url" content="https://www.webmanajemen.com/2017/07/php-amazon-s3-file-upload-code-aws.html">
<meta property="og:site_name" content="WMI">
<meta property="og:description" content="Amazon offers a PHP SDK for taking care of AWS and S asks for, yet it tips the scales at more than 500 documents and almost 5MB. In the">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/2048px-No_image_available.svg.png">
<meta property="article:published_time" content="2017-07-23T17:44:00.000Z">
<meta property="article:modified_time" content="2023-09-02T16:13:44.000Z">
<meta property="article:author" content="Dimas Lanjaka">
<meta property="article:tag" content="php">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/2048px-No_image_available.svg.png"><link rel="shortcut icon" href="/logo.svg"><link rel="canonical" href="https://www.webmanajemen.com/2017/07/php-amazon-s3-file-upload-code-aws.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//static.cloudflareinsights.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-106238155-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-106238155-1');
</script><script defer="defer" data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;2157c0f3b9e74a92badffe39156166b9&quot;}"></script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"Kami tidak dapat menemukan hasil apapun untuk pencarian: ${query}","hits_stats":"${hits} results found"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":false,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'Browser tidak mendukung'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'baru saja',
    min: 'menit yang lalu',
    hour: 'jam yang lalu',
    day: 'hari yang lalu',
    month: 'bulan yang lalu'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Muat lainnya'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: false,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'PHP Amazon S3 File Upload Code AWS Signature Version 4',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-09-02 23:13:44'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="https://rawcdn.githack.com/dimaslanjaka/Web-Manajemen/94406c3ac26b8fede322ec31e7895cf9b5f4e2d0/highlight.js/styles/github-dark.css" crossorigin="anonymous" referrerpolicy="no-referrer"><meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="WMI" type="application/atom+xml">
<link rel="alternate" href="/rss.xml" title="WMI" type="application/rss+xml">


<script type="application/ld+json" id="hexo-seo-schema">[
  {
    "@context": "http://schema.org",
    "@type": "WebSite",
    "url": "https://www.webmanajemen.com{search_term_string}",
    "potentialAction": {
      "@type": "SearchAction",
      "@id": "https://developers.google.com/search/docs/advanced/structured-data/sitelinks-searchbox",
      "target": "https://www.webmanajemen.com/search?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  },
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "@id": "https://developers.google.com/search/docs/advanced/structured-data/breadcrumb",
    "name": "breadcrumb",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "item": "https://www.webmanajemen.com/tags/php/",
        "name": "php"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "item": "https://www.webmanajemen.com/categories/programming/",
        "name": "programming"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "item": "https://www.webmanajemen.com/2017/07/php-amazon-s3-file-upload-code-aws.html",
        "name": "PHP Amazon S3 File Upload Code AWS Signature Version 4"
      }
    ]
  },
  {
    "@context": "https://schema.org/",
    "@type": "Article",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://www.webmanajemen.com/2017/07/php-amazon-s3-file-upload-code-aws.html"
    },
    "headline": "PHP Amazon S3 File Upload Code AWS Signature Version 4",
    "description": "Amazon offers a PHP SDK for taking care of AWS and S asks for, yet it tips the scales at more than 500 documents and almost 5MB. In the",
    "image": {
      "@type": "ImageObject",
      "url": "https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/2048px-No_image_available.svg.png",
      "width": "250",
      "height": "250"
    },
    "author": {
      "@type": "Person",
      "name": {
        "nick": "Unknown",
        "link": "",
        "email": "noreply@blogger.com"
      }
    },
    "publisher": {
      "@type": "Organization",
      "name": {
        "nick": "Unknown",
        "link": "",
        "email": "noreply@blogger.com"
      },
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.webmanajemen.com/2022/01/04/frp-redmi-go-tiare-fix/Bypass%20FRP%20Redmi%20Go%20Tiare%20M1903C3GG.jpg",
        "width": "125",
        "height": "125"
      }
    },
    "datePublished": "2017-07-24T00:44:00+07:00",
    "dateModified": "2023-09-02T23:13:44+07:00"
  }
]</script>

<link rel="sitemap" type="application/xml" title="Sitemap" href="/sitemap.xml"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar" title="avatar" itemprop="image"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Postingan</div><div class="length-num">1617</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">122</div></a><a href="/categories/"><div class="headline">Kategori</div><div class="length-num">12</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/page/google/login.html"><i class="fa-fw fab fa-google"></i><span> Login</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> Tools</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/page/bot-detect.html"><i class="fa-fw fas fa-robot"></i><span> Bot Detector</span></a></li><li><a class="site-page child" href="/page/cookies.html"><i class="fa-fw fas fa-cookie"></i><span> Cookies Manager</span></a></li><li><a class="site-page child" href="/page/moment-timezone.html"><i class="fa-fw fas fa-clock"></i><span> Moment Timezone Playground</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/The%20Legend%20Of%20Neverland/Quiz.html"><i class="fa-fw fas fa-folder-open"></i><span> Quiz The Legend Of Neverland</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="WMI"><span class="site-name">WMI</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/page/google/login.html"><i class="fa-fw fab fa-google"></i><span> Login</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fa-fw fas fa-list"></i><span> Tools</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/page/bot-detect.html"><i class="fa-fw fas fa-robot"></i><span> Bot Detector</span></a></li><li><a class="site-page child" href="/page/cookies.html"><i class="fa-fw fas fa-cookie"></i><span> Cookies Manager</span></a></li><li><a class="site-page child" href="/page/moment-timezone.html"><i class="fa-fw fas fa-clock"></i><span> Moment Timezone Playground</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/The%20Legend%20Of%20Neverland/Quiz.html"><i class="fa-fw fas fa-folder-open"></i><span> Quiz The Legend Of Neverland</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" rel="external nofollow noreferrer"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">PHP Amazon S3 File Upload Code AWS Signature Version 4</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon fas fa-history"></i><span class="post-meta-label">Updated</span><time datetime="2023-09-02T16:13:44.000Z" title="Updated 2023-09-02 23:13:44">2023-09-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/programming/">programming</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="PHP Amazon S3 File Upload Code AWS Signature Version 4"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><p><span id="span_a5da_0">Amazon offers a PHP SDK for taking care of AWS and S3 asks for, yet it tips the scales at more than 500 documents and almost 5MB. In the event that you simply need to transfer a record to a S3 basin utilizing PHP, you can make the HTTP POST ask for yourself utilizing just around 50 lines of code. This is likewise helpful on the off chance that you need to see how the demand and approval prepare function.</span><br><br id="br_a5da_1"><b id="b_a5da_0">AWS Signature Version 4</b><br><span id="span_a5da_1">This code uses Amazon AWS Signature Version 4. To view the old Version 2 code, see&nbsp;</span><a target="_blank" href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cHM6Ly93d3cuaDN4ZWQuY29tL3Byb2dyYW1taW5nL3NpbXBsZS1waHAtY29kZS1mb3ItdXBsb2FkaW5nLWEtZmlsZS10by1hbi1hbWF6b24tczMtYnVja2V0" id="a_a5da_0" rel="nofollow noopener noreferer noreferrer external" alt="PHP Amazon S3 File Upload Code AWS Signature Version 4" title="PHP Amazon S3 File Upload Code AWS Signature Version 4">this post</a><span id="span_a5da_2">.</span><br><br id="br_a5da_4"><b id="b_a5da_1">Sample Code</b><br>This is test PHP code to help you comprehend and test transferring to Amazon S3. Requires PHP variant 5.4 or fresher because of exhibit language structure. On the off chance that you need to utilize this in your venture, you ought to most likely alter this and place it into a capacity or strategy. I have it designed like this particularly to help demonstrate how the procedure functions.<br><br>Perused the inline code remarks for a clarification of each segment:<br><br id="br_a5da_9"></p><pre><code id="code_a5da_0">&lt;?php<br><br><span id="span_a5da_5">//&nbsp;USER&nbsp;OPTIONS</span><br><span id="span_a5da_6">//&nbsp;Replace&nbsp;these&nbsp;values&nbsp;with&nbsp;ones&nbsp;appropriate&nbsp;to&nbsp;you.</span><br>$accessKeyId&nbsp;=&nbsp;‘YOUR_ACCESS_KEY_ID’;<br>$secretKey&nbsp;=&nbsp;‘YOUR_SECRET_KEY’;<br>$bucket&nbsp;=&nbsp;‘YOUR_BUCKET_NAME’;<br>$region&nbsp;=&nbsp;‘BUCKET_AMAZON_REGION’;&nbsp;<span id="span_a5da_7">//&nbsp;us-west-2,&nbsp;us-east-1,&nbsp;etc</span><br>$acl&nbsp;=&nbsp;‘ACCESS_CONTROL_LIST’;&nbsp;<span id="span_a5da_8">//&nbsp;private,&nbsp;public-read,&nbsp;etc</span><br>$filePath&nbsp;=&nbsp;‘path/to/file.jpg’;<br>$fileName&nbsp;=&nbsp;‘myimage.jpg’;<br>$fileType&nbsp;=&nbsp;‘image/jpeg’;<br><br><span id="span_a5da_9">//&nbsp;VARIABLES</span><br><span id="span_a5da_10">//&nbsp;These&nbsp;are&nbsp;used&nbsp;throughout&nbsp;the&nbsp;request.</span><br>$longDate&nbsp;=&nbsp;gmdate(‘Ymd\THis\Z’);<br>$shortDate&nbsp;=&nbsp;gmdate(‘Ymd’);<br>$credential&nbsp;=&nbsp;$accessKeyId&nbsp;.&nbsp;‘/’&nbsp;.&nbsp;$shortDate&nbsp;.&nbsp;‘/’&nbsp;.&nbsp;$region&nbsp;.&nbsp;‘/s3/aws4_request’;<br><br><span id="span_a5da_11">//&nbsp;POST&nbsp;POLICY</span><br><span id="span_a5da_12">//&nbsp;Amazon&nbsp;requires&nbsp;a&nbsp;base64-encoded&nbsp;POST&nbsp;policy&nbsp;written&nbsp;in&nbsp;JSON.</span><br><span id="span_a5da_13">//&nbsp;This&nbsp;tells&nbsp;Amazon&nbsp;what&nbsp;is&nbsp;acceptable&nbsp;for&nbsp;this&nbsp;request.&nbsp;For</span><br><span id="span_a5da_14">//&nbsp;simplicity,&nbsp;we&nbsp;set&nbsp;the&nbsp;expiration&nbsp;date&nbsp;to&nbsp;always&nbsp;be&nbsp;24H&nbsp;in&nbsp;</span><br><span id="span_a5da_15">//&nbsp;the&nbsp;future.&nbsp;The&nbsp;two&nbsp;“starts-with”&nbsp;fields&nbsp;are&nbsp;used&nbsp;to&nbsp;restrict</span><br><span id="span_a5da_16">//&nbsp;the&nbsp;content&nbsp;of&nbsp;“key”&nbsp;and&nbsp;“Content-Type”,&nbsp;which&nbsp;are&nbsp;specified</span><br><span id="span_a5da_17">//&nbsp;later&nbsp;in&nbsp;the&nbsp;POST&nbsp;fields.&nbsp;Again&nbsp;for&nbsp;simplicity,&nbsp;we&nbsp;use&nbsp;blank</span><br><span id="span_a5da_18">//&nbsp;values&nbsp;(‘’)&nbsp;to&nbsp;not&nbsp;put&nbsp;any&nbsp;restrictions&nbsp;on&nbsp;those&nbsp;two&nbsp;fields.</span><br>$policy&nbsp;=&nbsp;base64_encode(json_encode([<br>&nbsp;&nbsp;&nbsp;&nbsp;‘expiration’&nbsp;=&gt;&nbsp;gmdate(‘Y-m-d\TH:i:s\Z’,&nbsp;time()&nbsp;+&nbsp;86400),<br>&nbsp;&nbsp;&nbsp;&nbsp;‘conditions’&nbsp;=&gt;&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[‘acl’&nbsp;=&gt;&nbsp;$acl],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[‘bucket’&nbsp;=&gt;&nbsp;$bucket],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[‘starts-with’,&nbsp;‘$Content-Type’,&nbsp;‘’],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[‘starts-with’,&nbsp;‘$key’,&nbsp;‘’],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[‘x-amz-algorithm’&nbsp;=&gt;&nbsp;‘AWS4-HMAC-SHA256’],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[‘x-amz-credential’&nbsp;=&gt;&nbsp;$credential],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[‘x-amz-date’&nbsp;=&gt;&nbsp;$longDate]<br>&nbsp;&nbsp;&nbsp;&nbsp;]<br>]));<br><br><span id="span_a5da_19">//&nbsp;SIGNATURE</span><br><span id="span_a5da_20">//&nbsp;A&nbsp;base64-encoded&nbsp;HMAC&nbsp;hashed&nbsp;signature&nbsp;with&nbsp;your&nbsp;secret&nbsp;key.</span><br><span id="span_a5da_21">//&nbsp;This&nbsp;is&nbsp;used&nbsp;so&nbsp;Amazon&nbsp;can&nbsp;verify&nbsp;your&nbsp;request,&nbsp;and&nbsp;will&nbsp;be</span><br><span id="span_a5da_22">//&nbsp;passed&nbsp;along&nbsp;in&nbsp;a&nbsp;POST&nbsp;field&nbsp;later.</span><br>$signingKey&nbsp;=&nbsp;hash_hmac(‘sha256’,&nbsp;$shortDate,&nbsp;‘AWS4’&nbsp;.&nbsp;$secretKey,&nbsp;true);<br>$signingKey&nbsp;=&nbsp;hash_hmac(‘sha256’,&nbsp;$region,&nbsp;$signingKey,&nbsp;true);<br>$signingKey&nbsp;=&nbsp;hash_hmac(‘sha256’,&nbsp;‘s3’,&nbsp;$signingKey,&nbsp;true);<br>$signingKey&nbsp;=&nbsp;hash_hmac(‘sha256’,&nbsp;‘aws4_request’,&nbsp;$signingKey,&nbsp;true);<br>$signature&nbsp;=&nbsp;hash_hmac(‘sha256’,&nbsp;$policy,&nbsp;$signingKey);<br><br><span id="span_a5da_23">//&nbsp;CURL</span><br><span id="span_a5da_24">//&nbsp;The&nbsp;cURL&nbsp;request.&nbsp;Passes&nbsp;in&nbsp;the&nbsp;full&nbsp;URL&nbsp;to&nbsp;your&nbsp;Amazon&nbsp;bucket.</span><br><span id="span_a5da_25">//&nbsp;Sets&nbsp;RETURNTRANSFER&nbsp;and&nbsp;HEADER&nbsp;to&nbsp;true&nbsp;to&nbsp;see&nbsp;the&nbsp;full&nbsp;response&nbsp;from</span><br><span id="span_a5da_26">//&nbsp;Amazon,&nbsp;including&nbsp;body&nbsp;and&nbsp;head.&nbsp;Sets&nbsp;POST&nbsp;fields&nbsp;for&nbsp;cURL.</span><br><span id="span_a5da_27">//&nbsp;Then&nbsp;executes&nbsp;the&nbsp;cURL&nbsp;request.</span><br>$ch&nbsp;=&nbsp;curl_init(‘https://’&nbsp;.&nbsp;$bucket&nbsp;.&nbsp;‘.s3-’&nbsp;.&nbsp;$region&nbsp;.&nbsp;‘.amazonaws.com’);<br>curl_setopt($ch,&nbsp;CURLOPT_RETURNTRANSFER,&nbsp;true);<br>curl_setopt($ch,&nbsp;CURLOPT_HEADER,&nbsp;true);<br>curl_setopt($ch,&nbsp;CURLOPT_POST,&nbsp;true);<br>curl_setopt($ch,&nbsp;CURLOPT_POSTFIELDS,&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;‘Content-Type’&nbsp;=&gt;&nbsp;&nbsp;$fileType,<br>&nbsp;&nbsp;&nbsp;&nbsp;‘acl’&nbsp;=&gt;&nbsp;$acl,<br>&nbsp;&nbsp;&nbsp;&nbsp;‘key’&nbsp;=&gt;&nbsp;$fileName,<br>&nbsp;&nbsp;&nbsp;&nbsp;‘policy’&nbsp;=&gt;&nbsp;&nbsp;$policy,<br>&nbsp;&nbsp;&nbsp;&nbsp;‘x-amz-algorithm’&nbsp;=&gt;&nbsp;‘AWS4-HMAC-SHA256’,<br>&nbsp;&nbsp;&nbsp;&nbsp;‘x-amz-credential’&nbsp;=&gt;&nbsp;$credential,<br>&nbsp;&nbsp;&nbsp;&nbsp;‘x-amz-date’&nbsp;=&gt;&nbsp;$longDate,<br>&nbsp;&nbsp;&nbsp;&nbsp;‘x-amz-signature’&nbsp;=&gt;&nbsp;$signature,<br>&nbsp;&nbsp;&nbsp;&nbsp;‘file’&nbsp;=&gt;&nbsp;new&nbsp;CurlFile(realpath($filePath),&nbsp;$fileType,&nbsp;$fileName)<br>]);<br>$response&nbsp;=&nbsp;curl_exec($ch);<br><br><span id="span_a5da_28">//&nbsp;RESPONSE</span><br><span id="span_a5da_29">//&nbsp;If&nbsp;Amazon&nbsp;returns&nbsp;a&nbsp;response&nbsp;code&nbsp;of&nbsp;204,&nbsp;the&nbsp;request&nbsp;was</span><br><span id="span_a5da_30">//&nbsp;successful&nbsp;and&nbsp;the&nbsp;file&nbsp;should&nbsp;be&nbsp;sitting&nbsp;in&nbsp;your&nbsp;Amazon&nbsp;S3</span><br><span id="span_a5da_31">//&nbsp;bucket.&nbsp;If&nbsp;a&nbsp;code&nbsp;other&nbsp;than&nbsp;204&nbsp;is&nbsp;returned,&nbsp;there&nbsp;will&nbsp;be&nbsp;an</span><br><span id="span_a5da_32">//&nbsp;XML-formatted&nbsp;error&nbsp;code&nbsp;in&nbsp;the&nbsp;body.&nbsp;For&nbsp;simplicity,&nbsp;we&nbsp;use</span><br><span id="span_a5da_33">//&nbsp;substr&nbsp;to&nbsp;extract&nbsp;the&nbsp;error&nbsp;code&nbsp;and&nbsp;output&nbsp;it.</span><br>if&nbsp;(curl_getinfo($ch,&nbsp;CURLINFO_HTTP_CODE)&nbsp;==&nbsp;204)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;‘Success!’;<br>}&nbsp;else&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;$error&nbsp;=&nbsp;substr($response,&nbsp;strpos($response,&nbsp;‘&lt;code&gt;’)&nbsp;+&nbsp;6);<br>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;substr($error,&nbsp;0,&nbsp;strpos($error,&nbsp;‘&lt;/code&gt;’));<br>}</code></pre><pre><span id="span_a5da_34">If you aren’t receiving any response at all, check if&nbsp;</span><samp id="samp_a5da_0">curl_exec($ch)</samp><span id="span_a5da_35">&nbsp;is returning false. If it is, chances are it’s due to an SSL issue. You can check the error at&nbsp;</span><samp id="samp_a5da_1">curl_error($ch)</samp><span id="span_a5da_36">. For testing purposes, you can set these two additional cURL options and see if it works:</span></pre><pre><code id="code_a5da_1">curl_setopt($ch,&nbsp;CURLOPT_SSL_VERIFYPEER,&nbsp;false);<br>curl_setopt($ch,&nbsp;CURLOPT_SSL_VERIFYHOST,&nbsp;0);</code></pre><span id="span_a5da_37">But note that doing this is very insecure. Read&nbsp;</span><a href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMTE5NTUzMC9kb2VzLXR1cm5pbmctb2ZmLWN1cmxvcHQtc3NsLXZlcmlmeXBlZXItaW4tY3VybC1tYWtlLXRyYW5zbWlzc2lvbi1pbnNlY3VyZQ==" id="a_a5da_1" target="_blank" rel="nofollow noopener noreferer noreferrer external" alt="PHP Amazon S3 File Upload Code AWS Signature Version 4" title="PHP Amazon S3 File Upload Code AWS Signature Version 4">this Stackoverflow post</a><span id="span_a5da_38">&nbsp;and&nbsp;</span><a href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cDovL3VuaXRzdGVwLm5ldC9ibG9nLzIwMDkvMDUvMDUvdXNpbmctY3VybC1pbi1waHAtdG8tYWNjZXNzLWh0dHBzLXNzbHRscy1wcm90ZWN0ZWQtc2l0ZXMv" id="a_a5da_2" target="_blank" rel="nofollow noopener noreferer noreferrer external" alt="PHP Amazon S3 File Upload Code AWS Signature Version 4" title="PHP Amazon S3 File Upload Code AWS Signature Version 4">this blog post</a><span id="span_a5da_39">.</span><br><br>Source: <a target="_blank" rel="nofollow noopener noreferer noreferrer external" href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cDovL2hleDNkLmNvbQ==" alt="PHP Amazon S3 File Upload Code AWS Signature Version 4" title="PHP Amazon S3 File Upload Code AWS Signature Version 4">hex3d.com</a><p></p>
</article><div class="post-copyright"><div class="post-copyright__created"><span class="post-copyright-meta"><i class="fas fa-calendar fa-fw"></i>Created at <span class="post-copyright-info"></span>2017-07-24 00:44:00</span></div><div class="post-copyright__updated"><span class="post-copyright-meta"><i class="fas fa-calendar fa-fw"></i>Updated at <span class="post-copyright-info"></span>2023-09-02 23:13:44</span></div><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://www.webmanajemen.com" rel="internal follow bookmark" alt="PHP Amazon S3 File Upload Code AWS Signature Version 4" title="PHP Amazon S3 File Upload Code AWS Signature Version 4">Unknown</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://www.webmanajemen.com/2017/07/php-amazon-s3-file-upload-code-aws.html" rel="internal follow bookmark" alt="PHP Amazon S3 File Upload Code AWS Signature Version 4" title="PHP Amazon S3 File Upload Code AWS Signature Version 4">https://www.webmanajemen.com/2017/07/php-amazon-s3-file-upload-code-aws.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="nofollow noopener noreferer noreferrer external" href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8=" alt="PHP Amazon S3 File Upload Code AWS Signature Version 4" title="PHP Amazon S3 File Upload Code AWS Signature Version 4">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/php/">php</a></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_whatsapp"></a><a class="a2a_button_twitter"></a><a class="a2a_button_wechat"></a><a class="a2a_button_sina_weibo"></a><a class="a2a_button_email"></a><a class="a2a_button_copy_link"></a><a class="a2a_dd" target="_blank" rel="nofollow noopener noreferer noreferrer external" href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cHM6Ly93d3cuYWRkdG9hbnkuY29tL3NoYXJl" alt="PHP Amazon S3 File Upload Code AWS Signature Version 4" title="PHP Amazon S3 File Upload Code AWS Signature Version 4"></a></div></div><script async="async" src="https://static.addtoany.com/menu/page.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2017/07/cara-ping-mesin-pencari-dengan-curl.html" title="Cara ping mesin pencari dengan curl"><img class="cover" src="https://res.cloudinary.com/dimaslanjaka/image/fetch/https://lh6.googleusercontent.com/proxy/tYpoSEj-W-8XcUJyBsi4Tq7Q8AaMtVNwK9CTgxcg1ZbZ0u5lHPzUcRDhOo6VJKysWUEe768ddx0ckD0uobENOvlY1GdhblF6n_NvZDSk3EaJecDY6XiWVSiz65Pe2tKGr0oo9Wgf12ea98aNcA55vNFXbYQKLLcdvyQ8YOEZotzbww=w350-h200-nc" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post" title="cover of previous post" itemprop="image"><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">Cara ping mesin pencari dengan curl</div></div></a></div><div class="next-post pull-right"><a href="/2017/07/an-alternative-way-to-resolve-submit.html" title="An alternative way to resolve the submit button is not working or return to home"><img class="cover" src="https://3.bp.blogspot.com/-JdPb9Jp1xSk/WODgW427ETI/AAAAAAAADb4/zLz2WLm7lfs3S-7d2itu2hJ3-slbN6esACLcB/s1600/adsense-1.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post" title="cover of next post" itemprop="image"><div class="pagination-info"><div class="label">Next</div><div class="next_info">An alternative way to resolve the submit button is not working or return to home</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2017/04/auto-defer-or-async-javascript-in-wp.html" title="Auto Defer Or Async Javascript in Wordpress"><img class="cover" src="https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcSIWbE9ADSn11CH5cNI3gcioX1mK17u9QAfTSLX9hxLtwyXgFYdt0J_Yyrw" alt="cover" title="cover" itemprop="image"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-09-02</div><div class="title">Auto Defer Or Async Javascript in Wordpress</div></div></a></div><div><a href="/2017/04/cara-menambahkan-komentar-facebook-di.html" title="Cara Menambahkan Komentar Facebook Di Wordpress Tanpa Plugin"><img class="cover" src="https://i2.wp.com/orbitingweb.com/wp-content/uploads/facebook-create-app-page.png?resize=641%2C174" alt="cover" title="cover" itemprop="image"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-09-02</div><div class="title">Cara Menambahkan Komentar Facebook Di Wordpress Tanpa Plugin</div></div></a></div><div><a href="/2017/04/how-to-fix-feedburner-feed-double.html" title="How to fix Feedburner feed double titles issue"><img class="cover" src="https://lh4.googleusercontent.com/proxy/OpPDt025N-7dF5nwAf8tkrBp0OX9NtsuZ7n-yatXnVPGYd4zDaTeUaUFavXyJVHQ7SbiPaDDZjg0ofk6nIcZZluTC6pVI3VDJgB6oW7oiu7OqdvER9xoLOfs57kodu4115sRRnrJGnOia-e_ugI_aUU" alt="cover" title="cover" itemprop="image"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-09-02</div><div class="title">How to fix Feedburner feed double titles issue</div></div></a></div><div><a href="/2017/04/instal-php-cli-pada-android-instalasi.html" title="Install PHP for Android CLI or Web Server"><img class="cover" src="https://res.cloudinary.com/dimaslanjaka/image/fetch/https://4.bp.blogspot.com/-3UATHL878wU/WKoXE11tarI/AAAAAAAAFAA/QhBnNJFo5QAiB4C04RKBG9zuFrP2Uhm4gCLcB/s1600/serverphp.jpg" alt="cover" title="cover" itemprop="image"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2024-01-20</div><div class="title">Install PHP for Android CLI or Web Server</div></div></a></div><div><a href="/2017/04/mighty-url-shortener-v201-download.html" title="Mighty URL Shortener v2.0.1 Download"><img class="cover" src="https://res.cloudinary.com/dimaslanjaka/image/fetch/https://www.jojothemes.com/wp-content/uploads/2016/07/Mighty-URL-Shortener-v1.0.1-%E2%80%93-Short-URL-Script.jpg" alt="cover" title="cover" itemprop="image"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-09-02</div><div class="title">Mighty URL Shortener v2.0.1 Download</div></div></a></div><div><a href="/2017/05/how-to-resize-and-crop-image-to-fit.html" title="How To Resize and Crop Image to fit Container div using CodeIgniter and jQuery"><img class="cover" src="http://www.larnr.com/wp-content/uploads/2015/05/resize-crop-1024x535.jpg" alt="cover" title="cover" itemprop="image"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2023-09-02</div><div class="title">How To Resize and Crop Image to fit Container div using CodeIgniter and jQuery</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar" title="avatar" itemprop="image"></div><div class="author-info__name">Dimas Lanjaka</div><div class="author-info__description">Website Management Indonesia is a blog about scripts, tips and tricks, games, software. Covering php, javascript, jquery, mysql, seo, e-commerce and others.</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Postingan</div><div class="length-num">1617</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">122</div></a><a href="/categories/"><div class="headline">Kategori</div><div class="length-num">12</div></a></div><a id="card-info-btn" target="_blank" rel="nofollow noopener noreferer noreferrer external" href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cHM6Ly9naXRodWIuY29tL2RpbWFzbGFuamFrYQ==" alt="PHP Amazon S3 File Upload Code AWS Signature Version 4" title="PHP Amazon S3 File Upload Code AWS Signature Version 4"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cHM6Ly9naXRodWIuY29tL2RpbWFzbGFuamFrYQ==" rel="nofollow noopener noreferer noreferrer external" target="_blank" title="Github" alt="PHP Amazon S3 File Upload Code AWS Signature Version 4"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:dimaslanjaka@gmail.com" rel="external nofollow noreferrer" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cHM6Ly9mYWNlYm9vay5jb20vZGltYXNsYW5qYWthMQ==" rel="nofollow noopener noreferer noreferrer external" target="_blank" title="Facebook" alt="PHP Amazon S3 File Upload Code AWS Signature Version 4"><i class="fab fa-facebook" style="color: #4267B2;"></i></a></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Postingan Baru</span></div><div class="aside-list"><div class="aside-list-item"><div class="content"><a class="title" href="/2024/01/hexo-render-single-post.html" title="How to render single post hexo">How to render single post hexo</a><time datetime="2024-01-29T11:40:36.000Z" title="Dibuat 2024-01-29 18:40:36">2024-01-29</time></div></div><div class="aside-list-item"><div class="content"><a class="title" href="/2024/01/eclipse-gradle-plugin-sync-build-with-spring-boot.html" title="spring boot with eclipse gradle plugin">spring boot with eclipse gradle plugin</a><time datetime="2024-01-25T20:38:40.000Z" title="Dibuat 2024-01-26 03:38:40">2024-01-26</time></div></div><div class="aside-list-item"><div class="content"><a class="title" href="/2024/01/auto-configure-classpath-config-using-eclipse-gradle-plugin.html" title="auto configure classpath config using eclipse gradle plugin">auto configure classpath config using eclipse gradle plugin</a><time datetime="2024-01-25T16:59:16.000Z" title="Dibuat 2024-01-25 23:59:16">2024-01-25</time></div></div><div class="aside-list-item"><div class="content"><a class="title" href="/2024/01/classpath-eclipse-within-vscode-redhat-java-for-gradle.html" title="classpath config for gradle within vscode redhat java extension">classpath config for gradle within vscode redhat java extension</a><time datetime="2024-01-25T12:45:04.000Z" title="Dibuat 2024-01-25 19:45:04">2024-01-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/GitHub/github-actions-overwrite-cache.html" title="How to overwrite cache in github actions workflow"><img src="https://opengraph.githubassets.com/e541d4950690819c66a1af94d1cda39585573064b7dfed13dc25f545db4f628c/actions/toolkit/issues/505" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="How to overwrite cache in github actions workflow" title="How to overwrite cache in github actions workflow" itemprop="image"></a><div class="content"><a class="title" href="/GitHub/github-actions-overwrite-cache.html" title="How to overwrite cache in github actions workflow">How to overwrite cache in github actions workflow</a><time datetime="2024-01-21T00:54:43.000Z" title="Dibuat 2024-01-21 07:54:43">2024-01-21</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">©2014 - 2024 By Dimas Lanjaka</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="nofollow noopener noreferer noreferrer external" href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cHM6Ly9oZXhvLmlv" alt="PHP Amazon S3 File Upload Code AWS Signature Version 4" title="PHP Amazon S3 File Upload Code AWS Signature Version 4">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="nofollow noopener noreferer noreferrer external" href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cHM6Ly9naXRodWIuY29tL2plcnJ5YzEyNy9oZXhvLXRoZW1lLWJ1dHRlcmZseQ==" alt="PHP Amazon S3 File Upload Code AWS Signature Version 4" title="PHP Amazon S3 File Upload Code AWS Signature Version 4">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="Toggle Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly/source/js/utils.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly/source/js/main.min.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly/source/js/tw_cn.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script src="https://www.webmanajemen.com/page/assets/js/r-ads.js"></script><script src="/page/assets/js/highlight.js"></script><script async="" data-pjax="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Memuat Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Cari postingan" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/hexo-theme-butterfly/source/js/search/local-search.min.js"></script></div></div>
<script src="/hexo-shortcodes-lib/githubcard.js"></script>
<link rel="stylesheet" href="/hexo-shortcodes-lib/gist.css">

      </body></html>