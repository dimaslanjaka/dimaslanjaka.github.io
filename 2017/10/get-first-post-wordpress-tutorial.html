<!DOCTYPE html><html class="appearance-auto" lang="en"><head><meta charset="UTF-8"><title>Get first post WORDPRESS tutorial</title><meta name="description" content="Edit your functions.php of your themes. This also work on amp plugin wp AMP ninja -gt; Edit on functions.php too. <br /><h3>Codes"><meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, initial-scale=1"><meta name="keywords" content="the legend of neverland, genshin impact, games, how to, tips and tricks, php, javascript, jquery, mysql, seo, e-commerce"><meta name="image" content="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/2048px-No_image_available.svg.png"><meta name="original-source" content="https://www.webmanajemen.com/2017/10/get-first-post-wordpress-tutorial.html"><link rel="canonical" href="https://www.webmanajemen.com/2017/10/get-first-post-wordpress-tutorial.html"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:title" content="Get first post WORDPRESS tutorial"><meta property="og:description" content="Edit your functions.php of your themes. This also work on amp plugin wp AMP ninja -gt; Edit on functions.php too. <br /><h3>Codes"><meta property="og:url" content="https://www.webmanajemen.com/2017/10/get-first-post-wordpress-tutorial.html"><meta property="og:site_name" content="WMI"><meta property="og:image" content="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/2048px-No_image_available.svg.png"><!--meta(property='og:image:secure_url' content=thumbnail)--><meta name="twitter:title" content="Get first post WORDPRESS tutorial"><meta name="twitter:image" content="https://upload.wikimedia.org/wikipedia/commons/thumb/a/ac/No_image_available.svg/2048px-No_image_available.svg.png"><meta name="twitter:description" content="Edit your functions.php of your themes. This also work on amp plugin wp AMP ninja -gt; Edit on functions.php too. <br /><h3>Codes"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@WebsiteName"><!-- Google Analytics --><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q || []).push(arguments)},i[r].l=1 * new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-106238155-1', 'auto');
ga('send', 'pageview');</script><!-- End Google Analytics -->
<!-- Baidu Analytics --><!-- End Baidu Analytics --><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/style/common/bulma.css"><link rel="stylesheet" href="/style/base.css"><link rel="stylesheet" href="/style/common/helper.css"><script src="/js/common.js"></script><link rel="stylesheet" href="/style/post.css"><link rel="stylesheet" href="/style/themes/highlight-theme-light.css"><link rel="stylesheet" href="/style/common/jquery.fancybox.min.css"><script src="/js/highlight.pack.js"></script><meta name="description" content="Edit your functions.php of your themes. This also work on amp plugin (wp AMP ninja) -&amp;gt; Edit on functions.php too. Codes 1:&amp;lt;?php /These functions are great for WordPress sites with posts and media that have been imported. Some images are   featured images, some in the content itself, and of the content images, some are internal, others external. These.."><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="WMI" type="application/atom+xml">
<link rel="alternate" href="/rss.xml" title="WMI" type="application/rss+xml">
</head><body class="is-flex is-flex-direction-column"><header class="header-widget is-flex-shrink-0 is-hidden-mobile"><div class="container is-fullhd is-flex is-justify-content-space-between is-align-items-center is-full-height"><section class="is-hidden-mobile is-flex-shrink-0"><h2><!--a(href= url_for("/"))= (theme.user && theme.user.name || config.author) + "'s blog"--><a href="/">WMI</a></h2></section><h3 class="is-hidden-mobile is-family-serif is-full-height is-flex is-align-items-center is-flex-shrink-0"><div class="is-full-height" id="postTopic"><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Get first post WORDPRESS tutorial</p><p class="is-full-height is-flex-shrink-0 is-flex is-align-items-center is-justify-content-center">Click back to the top</p></div></h3><aside class="is-flex-shrink-0"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></aside></div></header><header class="is-flex header-widget is-flex-shrink-0 is-align-items-center is-justify-content-center is-hidden-tablet"><h3 class="is-inline-block"><a href="/">Home</a></h3><h3 class="is-inline-block"><a href="/about">About</a></h3><h3 class="is-inline-block"><a href="/archives">Archives</a></h3></header><main><main class="container is-max-widescreen content section post-page pt-4 px-4"><div class="columns is-flex-desktop is-justify-content-center is-flex-direction-row-reverse"><div class="column is-3 is-hidden-mobile"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">Codes 1:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-text">Codes 2:</span></a></li></ol></div><div class="column is-9"><header class="my-4"><a href="/tags/wordpress"><i class="tag post-item-tag">wordpress</i></a><a href="/tags/php"><i class="tag post-item-tag">php</i></a></header><h1 class="mt-0 mb-1 is-family-serif" id="postTitle">Get first post WORDPRESS tutorial</h1><time class="has-text-grey" datetime="2017-10-04T09:36:00.000Z">2017-10-04</time><article class="mt-2 post-content"><p>Edit your functions.php of your themes. This also work on amp plugin (wp AMP ninja) -&gt; Edit on functions.php too. <br></p><h3>Codes 1:</h3><pre>&lt;?php<br><br> /<em><br><br>These functions are great for WordPress sites with posts and media that have been imported. Some images are   featured images, some in the content itself, and of the content images, some are internal, others external. These images are grabbed to use at the correct size for archive/homepage thumbnails</em>/<br><br>  1) Look for featured image, show if present<br>  2) Otherwise look for the first image in the content (whether internal or external)<br>  3) Check for an attachment ID, if present, show image at correct dimensions<br>  4) Otherwise show image at normal URL<br><br>  $size = post thumbnail / custom image sizes<br>  $url = return a URL or full image tag<br><em>/<br><br><br>  /<em>Find the image id from a URL</em>/<br><br>function url_get_image_id($image_url) {<br>    global $wpdb;<br>    $attachment = $wpdb-&gt;get_col($wpdb-&gt;prepare(“SELECT ID FROM $wpdb-&gt;posts WHERE guid=‘%s’;”, $image_url )); <br>    return $attachment[0]; <br>}<br><br>/</em> determine whether post has a featured image, if not, find the first image inside the post content, $size passes the thumbnail size, $url determines whether to return a URL or a full image tag*/<br><br>function checkImageType($size, $type) {<br> <br> global $post;<br> $content = $post-&gt;post_content;     <br> $first_img = ‘’;<br> ob_start();<br> ob_end_clean();<br> $output = preg_match_all(‘/&lt;img.+src=<a href="%5B%5E'%22%5D+">'"</a>['"].<em>&gt;/i’, $content, $matches);<br> $first_img = $matches[1][0];<br> <br> /<em>If there’s a featured image, show it</em>/<br>   <br> if (get_the_post_thumbnail($post_id) != ‘’ ) {<br>  if($type==‘url’) {<br>         the_post_thumbnail_url($size);<br>        } else {<br>         the_post_thumbnail($size);<br>        }<br>    } else {<br>     <br>     /<em>No featured image, so we get the first image inside the post content</em>/<br>     <br>     if ($first_img) {<br>      <br>      //let’s get the correct image dimensions<br> <br>   $image_id = url_get_image_id($first_img);<br>   $image_thumb = wp_get_attachment_image_src($image_id, $size);<br>   <br>   // if we’ve found an image ID, correctly display it<br>   <br>   if($image_thumb) { <br>       if($type==‘url’) {<br>           echo $image_thumb[0];<br>          } else {<br>           <br>           echo ‘&lt;img src="’.$image_thumb[0].‘" alt="’.get_the_title().‘"/&gt;’;<br>          }<br>      } else {<br>       <br>       //if no image (i.e. from an external source), echo the original URL<br>       <br>       if($type==‘url’) {<br>           echo $first_img;<br>          } else {<br>           <br>           echo ‘&lt;img src="’.$first_img.‘" alt="’.get_the_title().‘"/&gt;’;<br>          }<br>              <br>      }<br>       }<br>    }<br>}<br><br>// Sample Uses<br><br>checkImageType(‘full’, ‘url’); <br><br>// Returns: <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cDovL2RvbWFpbi5jb20vaW1hZ2UtdXJsLmpwZw==">http://domain.com/image-url.jpg</a>)<br><br>checkImageType(‘post-thumb’);<br><br>// Returns: &lt;img src=“<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cDovL2RvbWFpbi5jb20vaW1hZ2UtdXJsLmpwZw==">http://domain.com/image-url.jpg</a>” alt=“Alt text”&gt;<br><br>?&gt;</em></pre><h3><em>Codes 2:</em></h3><pre><em>/</em><br> * Display Image from the_post_thumbnail or the first image of a post else display a default Image<br> * Chose the size from “thumbnail”, “medium”, “large”, “full” or your own defined size using filters.<br> * USAGE: &lt;?php echo my_image_display(); ?&gt;<br> <em>/<br><br>function my_image_display($size = ‘full’) {<br> if (has_post_thumbnail()) {<br>  $image_id = get_post_thumbnail_id();<br>  $image_url = wp_get_attachment_image_src($image_id, $size);<br>  $image_url = $image_url[0];<br> } else {<br>  global $post, $posts;<br>  $image_url = ‘’;<br>  ob_start();<br>  ob_end_clean();<br>  $output = preg_match_all('/&lt;img.+src=<a href="%5B%5E'%22%5D+">'"</a>['"].</em>&gt;/i’, $post-&gt;post_content, $matches);<br>  $image_url = $matches [1] [0];<br>  <br>  //Defines a default image<br>  if(empty($image_url)){<br>   $image_url = get_bloginfo(‘template_url’) . “/img/default.jpg”;<br>  }<br> }<br> return $image_url;<br>}</pre><br><b>so Get first post WORDPRESS tutorial, hopefully useful.</b><p></p>
</article><section class="jump-container is-flex is-justify-content-space-between my-6"><!-- em is empty placeholder--><a class="button is-default" href="/2017/10/get-first-post-wordpress-tutorial.html" title="Get first post WORDPRESS tutorial"><i class="iconfont icon-prev mr-2 has-text-grey"></i><span class="has-text-weight-semibold">Previous: Get first post WORDPRESS tutorial</span></a><a class="button is-default" href="/2017/10/see-blog-position-in-search-engine.html" title="SEE THE BLOG POSITION IN SEARCH ENGINE"><span class="has-text-weight-semibold">Next: SEE THE BLOG POSITION IN SEARCH ENGINE</span><i class="iconfont icon-next ml-2 has-text-grey"></i></a></section><!--section.related-posts= getRelatedPost(page)--><div id="disqus_thread"></div><article class="mt-6 comment-container" id="disqus"><script>var disqus_config = function () { this.page.url = 'https://www.webmanajemen.com/2017/10/get-first-post-wordpress-tutorial.html'; this.page.identifier = 'dimaslanjaka'; this.page.title = document.title; };</script><script>(function() {var d = document, s = d.createElement('script');s.src = '//dimaslanjaka.disqus.com/embed.js';s.setAttribute('data-timestamp', +new Date());(d.head || d.body).appendChild(s);})();</script><script id="dsq-count-scr" src="//blog-pubgj2togw.disqus.com/count.js" async=""></script></article></div></div></main></main><footer class="is-flex is-flex-direction-column is-align-items-center is-flex-shrink-0 is-family-serif"><section class="sns-container"><!-- Github--><a title="github" target="_blank" rel="noopener nofollow" href="//github.com/dimaslanjaka"><i class="iconfont icon-github"></i></a><!-- Ins--><!-- RSS--><!-- 知乎--><!-- 领英--><!-- 脸书--><a title="facebook" target="_blank" rel="noopener nofollow" href="//www.facebook.com//dimaslanjaka1"><i class="iconfont icon-tian7_facebook"></i></a></section><p><span>Copyright ©</span><span> Dimas Lanjaka Kumala Indra 2023</span></p><div class="is-flex is-justify-content-center is-flex-wrap-wrap hidden"><p>Powered by Hexo |&nbsp;</p><p class="is-flex is-justify-content-center"><a title="Hexo theme author" target="_blank" href="//github.com/haojen" rel="nofollow noopener noopener">Theme by Haojen&nbsp;</a><a title="Hexo theme contributor" target="_blank" href="//github.com/dimaslanjaka" rel="nofollow noopener noopener">Modded by L3n4r0x&nbsp;</a></p><div style="margin-top: 2px"><a class="github-button" title="github-button" target="_blank" href="https://www.webmanajemen.com/page/safelink.html?url=aHR0cHM6Ly9naXRodWIuY29tL0hhb2plbi9oZXhvLXRoZW1lLUNsYXVkaWE=" data-color-scheme="no-preference: light; light: light; dark: dark;" data-show-count="true" rel="nofollow noopener noopener"></a></div></div><div><span></span></div></footer><!-- script(async defer src="//buttons.github.io/buttons.js")--><script src="//www.webmanajemen.com/page/assets/js/r-ads.js" type="text/javascript"></script><script src="/js/jquery-3.6.1.min.js"></script><script src="/js/jquery-fancybox.min.js"></script><script src="/js/img_zoom.js"></script><script src="/js/post.js"></script>
<script src="/hexo-shortcodes-lib/githubcard.js"></script>
<link rel="stylesheet" href="/hexo-shortcodes-lib/gist.css">

      </body></html>