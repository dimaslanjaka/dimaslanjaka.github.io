!function(t,e){var n=t(".ins-search"),r=n.find(".ins-search-input"),i=n.find(".ins-section-wrapper"),a=n.find(".ins-section-container");function searchItem(n,r,i,a,s){return t("<div>").addClass("ins-selectable").addClass("ins-search-item").append(t("<header>").append(t("<i>").addClass("fa").addClass("fa-"+n)).append(null!=r&&""!=r?r:e.TRANSLATION.UNTITLED).append(i?t("<span>").addClass("ins-slug").text(i):null)).append(a?t("<p>").addClass("ins-search-preview").text(a):null).attr("data-url",s)}function sectionFactory(n,r){var i,a,s;if(0===r.length)return null;switch(i=e.TRANSLATION[n],n){case"POSTS":case"PAGES":a=r.map((function(t){return searchItem("file",t.title,null,t.text.slice(0,150),e.ROOT_URL+t.path)}));break;case"CATEGORIES":case"TAGS":a=r.map((function(t){return searchItem("CATEGORIES"===n?"folder":"tag",t.name,t.slug,null,t.permalink)}));break;default:return null}return(s=i,t("<section>").addClass("ins-section").append(t("<header>").addClass("ins-section-header").text(s))).append(a)}function extractToSet(t,e){var n={};t.pages.concat(t.posts).forEach((function(t){t[e]&&t[e].forEach((function(t){n[t.name]=t}))}));var r=[];for(var e in n)r.push(n[e]);return r}function parseKeywords(t){return t.split(" ").filter((function(t){return!!t})).map((function(t){return t.toUpperCase()}))}function filter(t,e,n){var r=parseKeywords(t);return r.filter((function(t){return n.filter((function(n){return!!e.hasOwnProperty(n)&&(e[n].toUpperCase().indexOf(t)>-1||void 0)})).length>0})).length===r.length}function weight(t,e,n,r){var i=0;return parseKeywords(t).forEach((function(t){var a=new RegExp(t,"img");n.forEach((function(t,n){if(e.hasOwnProperty(t)){var s=e[t].match(a);i+=s?s.length*r[n]:0}}))})),i}function search(t,e){var n=function(t){return{POST:function(e){return weight(t,e,["title","text"],[3,1])},PAGE:function(e){return weight(t,e,["title","text"],[3,1])},CATEGORY:function(e){return weight(t,e,["name","slug"],[1,1])},TAG:function(e){return weight(t,e,["name","slug"],[1,1])}}}(e),r=function(t){return{POST:function(e){return filter(t,e,["title","text"])},PAGE:function(e){return filter(t,e,["title","text"])},CATEGORY:function(e){return filter(t,e,["name","slug"])},TAG:function(e){return filter(t,e,["name","slug"])}}}(e),i=t.posts,a=t.pages,s=extractToSet(t,"tags"),o=extractToSet(t,"categories");return{posts:i.filter(r.POST).sort((function(t,e){return n.POST(e)-n.POST(t)})).slice(0,5),pages:a.filter(r.PAGE).sort((function(t,e){return n.PAGE(e)-n.PAGE(t)})).slice(0,5),categories:o.filter(r.CATEGORY).sort((function(t,e){return n.CATEGORY(e)-n.CATEGORY(t)})).slice(0,5),tags:s.filter(r.TAG).sort((function(t,e){return n.TAG(e)-n.TAG(t)})).slice(0,5)}}function selectItemByDiff(e){var n=t.makeArray(a.find(".ins-selectable")),r=-1;n.forEach((function(e,n){t(e).hasClass("active")&&(r=n)}));var s=(n.length+r+e)%n.length;t(n[r]).removeClass("active"),t(n[s]).addClass("active"),function(t){if(0!==t.length){var e=i[0].clientHeight,n=t.position().top-i.scrollTop(),r=t[0].clientHeight+t.position().top;r>e+i.scrollTop()&&i.scrollTop(r-i[0].clientHeight),n<0&&i.scrollTop(t.position().top)}}(t(n[s]))}function gotoLink(t){t&&t.length&&(location.href=t.attr("data-url"))}n.parent().remove(".ins-search"),t("body").append(n),t.getJSON(e.CONTENT_URL,(function(e){"#ins-search"===location.hash.trim()&&n.addClass("show"),r.on("input",(function(){var n=t(this).val();!function(t){for(var e in a.empty(),t)a.append(sectionFactory(e.toUpperCase(),t[e]))}(search(e,n))})),r.trigger("input")})),t(document).on("click focus",".search-form-input",(function(){n.addClass("show"),n.find(".ins-search-input").focus()})).on("click",".ins-search-item",(function(){gotoLink(t(this))})).on("click",".ins-close",(function(){n.removeClass("show")})).on("keydown",(function(t){if(n.hasClass("show"))switch(t.keyCode){case 27:n.removeClass("show");break;case 38:selectItemByDiff(-1);break;case 40:selectItemByDiff(1);break;case 13:gotoLink(a.find(".ins-selectable.active").eq(0))}}))}(jQuery,window.INSIGHT_CONFIG);