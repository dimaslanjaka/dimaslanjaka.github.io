firebase.initializeApp({apiKey:CONFIG.firestore.apiKey,projectId:CONFIG.firestore.projectId}),function(){const getCount=(e,t)=>e.get().then((o=>{let r=o.exists?o.data().count:0;return t&&(r++,e.set({count:r})),r})),appendCountTo=e=>t=>{e.innerText=t},e=firebase.firestore().collection(CONFIG.firestore.collection);document.addEventListener("page:loaded",(()=>{if(CONFIG.page.isPost){const t=document.querySelector(".post-title").textContent.trim(),o=e.doc(t);let r=CONFIG.hostname===location.hostname;localStorage.getItem(t)?r=!1:localStorage.setItem(t,!0),getCount(o,r).then(appendCountTo(document.querySelector(".firestore-visitors-count")))}else if(CONFIG.page.isHome){const t=[...document.querySelectorAll(".post-title")].map((t=>{const o=t.textContent.trim(),r=e.doc(o);return getCount(r)}));Promise.all(t).then((e=>{const t=document.querySelectorAll(".firestore-visitors-count");e.forEach(((e,o)=>{appendCountTo(t[o])(e)}))}))}}))}();